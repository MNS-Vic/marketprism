# MarketPrism ç­–ç•¥ç®¡ç†æœåŠ¡

## ğŸ¯ æœåŠ¡æ¦‚è¿°

ç­–ç•¥ç®¡ç†æœåŠ¡æ˜¯MarketPrismé‡åŒ–äº¤æ˜“ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£ç®¡ç†å„ç§äº¤æ˜“ç­–ç•¥çš„åˆ›å»ºã€é…ç½®ã€ç›‘æ§å’Œæ§åˆ¶ã€‚æ”¯æŒç½‘æ ¼ç­–ç•¥ã€ä¿¡å·äº¤æ˜“ã€å®šæŠ•ç­–ç•¥ç­‰å¤šç§é‡åŒ–äº¤æ˜“ç­–ç•¥ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### ğŸ“Š æ”¯æŒçš„ç­–ç•¥ç±»å‹

1. **ç½‘æ ¼ç­–ç•¥ (Grid Trading)**
   - æ”¯æŒç°è´§å’Œåˆçº¦ç½‘æ ¼
   - è‡ªå®šä¹‰ä»·æ ¼åŒºé—´å’Œç½‘æ ¼æ•°é‡
   - æ™ºèƒ½ç½‘æ ¼å¯†åº¦ä¼˜åŒ–
   - è‡ªåŠ¨é‡å¯åŠŸèƒ½

2. **ä¿¡å·äº¤æ˜“ (Signal Trading)**
   - å¤šç§æŠ€æœ¯æŒ‡æ ‡ä¿¡å·
   - è‡ªå®šä¹‰æ­¢ç›ˆæ­¢æŸ
   - ä»“ä½ç®¡ç†
   - ä¿¡å·æºé›†æˆ

3. **å®šæŠ•ç­–ç•¥ (Dollar Cost Averaging)**
   - å¤šå¸ç§å®šæŠ•
   - çµæ´»æŠ•èµ„å‘¨æœŸ
   - åŠ¨æ€åˆ†é…æ¯”ä¾‹
   - æ™ºèƒ½è§¦å‘æ¡ä»¶

### ğŸ”§ ç®¡ç†åŠŸèƒ½

- **ç­–ç•¥åˆ›å»º**ï¼šé€šè¿‡APIæˆ–Grafanaç•Œé¢åˆ›å»ºç­–ç•¥
- **å®æ—¶ç›‘æ§**ï¼šç­–ç•¥çŠ¶æ€ã€PnLã€æŒä»“å®æ—¶ç›‘æ§
- **é£é™©æ§åˆ¶**ï¼šæ­¢æŸã€é£é™©é¢„è­¦ã€ä»“ä½é™åˆ¶
- **è¡¨ç°åˆ†æ**ï¼šæ”¶ç›Šç‡ã€å¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ç­‰æŒ‡æ ‡

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç­–ç•¥ç®¡ç†æœåŠ¡æ¶æ„                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ“± APIæ¥å£     â”‚   ğŸ§  ç­–ç•¥å¼•æ“     â”‚   ğŸ“Š æ•°æ®åˆ†æ            â”‚
â”‚   â€¢ REST API    â”‚   â€¢ ç½‘æ ¼ç­–ç•¥      â”‚   â€¢ æ€§èƒ½æŒ‡æ ‡            â”‚
â”‚   â€¢ WebSocket   â”‚   â€¢ ä¿¡å·äº¤æ˜“      â”‚   â€¢ é£é™©ç›‘æ§            â”‚
â”‚   â€¢ Grafanaé›†æˆ â”‚   â€¢ å®šæŠ•ç­–ç•¥      â”‚   â€¢ å›æµ‹åˆ†æ            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ğŸ”„ ä»»åŠ¡è°ƒåº¦     â”‚   ğŸ’¾ æ•°æ®å­˜å‚¨     â”‚   ğŸ”” å‘Šè­¦é€šçŸ¥            â”‚
â”‚   â€¢ å®šæ—¶æ‰§è¡Œ     â”‚   â€¢ ç­–ç•¥é…ç½®      â”‚   â€¢ é£é™©é¢„è­¦            â”‚
â”‚   â€¢ äº‹ä»¶è§¦å‘     â”‚   â€¢ äº¤æ˜“è®°å½•      â”‚   â€¢ çŠ¶æ€é€šçŸ¥            â”‚
â”‚   â€¢ æ¡ä»¶ç›‘æ§     â”‚   â€¢ æ€§èƒ½æ•°æ®      â”‚   â€¢ å¼‚å¸¸å‘Šè­¦            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¡ APIæ¥å£

### ç­–ç•¥ç®¡ç†

#### åˆ›å»ºç½‘æ ¼ç­–ç•¥
```bash
POST /api/v1/strategies/grid
Content-Type: application/json

{
  "name": "BTCç½‘æ ¼ç­–ç•¥1",
  "symbol": "BTCUSDT",
  "exchange": "binance",
  "lower_price": 60000,
  "upper_price": 70000,
  "grid_count": 20,
  "investment_amount": 1000,
  "auto_restart": true
}
```

#### åˆ›å»ºä¿¡å·äº¤æ˜“ç­–ç•¥
```bash
POST /api/v1/strategies/signal
Content-Type: application/json

{
  "name": "ETHæŠ€æœ¯æŒ‡æ ‡ç­–ç•¥",
  "symbol": "ETHUSDT",
  "exchange": "binance",
  "signal_source": "rsi_macd",
  "position_size": 0.1,
  "stop_loss": 5.0,
  "take_profit": 10.0
}
```

#### åˆ›å»ºå®šæŠ•ç­–ç•¥
```bash
POST /api/v1/strategies/dca
Content-Type: application/json

{
  "name": "å¤šå¸ç§å®šæŠ•è®¡åˆ’",
  "symbols": ["BTCUSDT", "ETHUSDT", "ADAUSDT"],
  "exchange": "binance",
  "interval": "daily",
  "amount_per_order": 100,
  "allocation": {
    "BTCUSDT": 0.5,
    "ETHUSDT": 0.3,
    "ADAUSDT": 0.2
  }
}
```

### ç­–ç•¥æ§åˆ¶

#### è·å–ç­–ç•¥åˆ—è¡¨
```bash
GET /api/v1/strategies
```

#### è·å–ç­–ç•¥è¯¦æƒ…
```bash
GET /api/v1/strategies/{strategy_id}
```

#### æš‚åœç­–ç•¥
```bash
POST /api/v1/strategies/{strategy_id}/pause
```

#### æ¢å¤ç­–ç•¥
```bash
POST /api/v1/strategies/{strategy_id}/resume
```

#### åœæ­¢ç­–ç•¥
```bash
POST /api/v1/strategies/{strategy_id}/stop
```

#### è·å–ç­–ç•¥è¡¨ç°
```bash
GET /api/v1/strategies/{strategy_id}/performance
```

## ğŸ”Œ Grafana é›†æˆ

### æ•°æ®æºé…ç½®

1. **å®‰è£…MarketPrismæ•°æ®æºæ’ä»¶**
```bash
grafana-cli plugins install marketprism-datasource
```

2. **é…ç½®æ•°æ®æº**
```json
{
  "name": "MarketPrismç­–ç•¥",
  "type": "marketprism-datasource",
  "url": "http://localhost:8087",
  "access": "proxy",
  "jsonData": {
    "apiKey": "your-api-key",
    "timeout": 30
  }
}
```

### ä»ªè¡¨æ¿æ¨¡æ¿

#### ç­–ç•¥æ¦‚è§ˆä»ªè¡¨æ¿
- æ´»è·ƒç­–ç•¥åˆ—è¡¨
- æ€»ä½“PnLè¶‹åŠ¿
- é£é™©æŒ‡æ ‡ç›‘æ§
- å‘Šè­¦çŠ¶æ€æ˜¾ç¤º

#### ç­–ç•¥è¯¦æƒ…ä»ªè¡¨æ¿
- ç­–ç•¥é…ç½®ä¿¡æ¯
- å®æ—¶è¡¨ç°å›¾è¡¨
- äº¤æ˜“å†å²è®°å½•
- é£é™©åˆ†ææŒ‡æ ‡

## ğŸš€ å¯åŠ¨æœåŠ¡

### ç›´æ¥å¯åŠ¨
```bash
cd services/strategy-management
python main.py
```

### ä½¿ç”¨å¯åŠ¨è„šæœ¬
```bash
./start-strategy-management.sh
```

### Dockerå¯åŠ¨
```bash
docker-compose up strategy-management
```

## âš™ï¸ é…ç½®è¯´æ˜

### æœåŠ¡é…ç½® (config/services.yaml)
```yaml
strategy-management:
  host: "0.0.0.0"
  port: 8087
  log_level: "info"
  max_strategies: 100
  default_exchange: "binance"
  risk_limits:
    max_position_size: 0.1
    max_daily_loss: 5.0
    max_drawdown: 20.0
```

### ç­–ç•¥é…ç½® (config/strategies.yaml)
```yaml
grid_strategies:
  default_settings:
    min_grid_count: 5
    max_grid_count: 100
    min_investment: 10
    default_auto_restart: true

signal_strategies:
  default_settings:
    default_stop_loss: 5.0
    default_take_profit: 10.0
    max_position_size: 0.2

dca_strategies:
  default_settings:
    supported_intervals: ["daily", "weekly", "monthly"]
    min_amount_per_order: 1
    max_symbols: 10
```

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### ç­–ç•¥çº§åˆ«æŒ‡æ ‡
- **æ”¶ç›ŠæŒ‡æ ‡**ï¼šæ€»æ”¶ç›Šç‡ã€æ—¥æ”¶ç›Šç‡ã€æœˆæ”¶ç›Šç‡
- **é£é™©æŒ‡æ ‡**ï¼šæœ€å¤§å›æ’¤ã€æ³¢åŠ¨ç‡ã€å¤æ™®æ¯”ç‡
- **äº¤æ˜“æŒ‡æ ‡**ï¼šèƒœç‡ã€å¹³å‡æŒä»“æ—¶é—´ã€äº¤æ˜“é¢‘ç‡

### ç³»ç»Ÿçº§åˆ«æŒ‡æ ‡
- **æœåŠ¡çŠ¶æ€**ï¼šæ´»è·ƒç­–ç•¥æ•°ã€æ€»ç®¡ç†èµ„é‡‘ã€ç³»ç»Ÿè´Ÿè½½
- **æ€§èƒ½æŒ‡æ ‡**ï¼šAPIå“åº”æ—¶é—´ã€å¤„ç†ååé‡ã€é”™è¯¯ç‡

## ğŸ”” å‘Šè­¦é…ç½®

### é£é™©å‘Šè­¦
- ç­–ç•¥å›æ’¤è¶…è¿‡é˜ˆå€¼
- å•æ—¥æŸå¤±è¶…è¿‡é™åˆ¶
- ä»“ä½é›†ä¸­åº¦è¿‡é«˜

### ç³»ç»Ÿå‘Šè­¦
- ç­–ç•¥æ‰§è¡Œå¼‚å¸¸
- äº¤æ˜“æ‰€è¿æ¥ä¸­æ–­
- æœåŠ¡èµ„æºä¸è¶³

## ğŸ§ª æµ‹è¯•

### å•å…ƒæµ‹è¯•
```bash
cd tests/unit
python -m pytest test_strategy_management.py -v
```

### é›†æˆæµ‹è¯•
```bash
cd tests/integration
python -m pytest test_strategy_api.py -v
```

### æ€§èƒ½æµ‹è¯•
```bash
cd tests/performance
python test_strategy_load.py
```

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°ç­–ç•¥ç±»å‹

1. **å®šä¹‰é…ç½®æ¨¡å‹**
```python
class CustomStrategyConfig(BaseModel):
    name: str
    custom_param: float
    # å…¶ä»–å‚æ•°...
```

2. **å®ç°ç­–ç•¥é€»è¾‘**
```python
async def create_custom_strategy(self, config: CustomStrategyConfig):
    # ç­–ç•¥åˆ›å»ºé€»è¾‘
    pass
```

3. **æ·»åŠ APIç«¯ç‚¹**
```python
@self.app.post("/api/v1/strategies/custom")
async def create_custom_strategy(config: CustomStrategyConfig):
    # APIå¤„ç†é€»è¾‘
    pass
```

### æ‰©å±•æ•°æ®æº
- æ”¯æŒæ›´å¤šäº¤æ˜“æ‰€API
- é›†æˆå¤–éƒ¨ä¿¡å·æº
- æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡è®¡ç®—

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/æ–°åŠŸèƒ½`)
3. æäº¤æ›´æ”¹ (`git commit -am 'æ·»åŠ æ–°åŠŸèƒ½'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/æ–°åŠŸèƒ½`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ†˜ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ [FAQ](docs/FAQ.md)
2. æäº¤ [Issue](https://github.com/marketprism/issues)
3. è”ç³»å¼€å‘å›¢é˜Ÿ

---

**MarketPrismç­–ç•¥ç®¡ç†æœåŠ¡** - è®©é‡åŒ–äº¤æ˜“æ›´ç®€å•ã€æ›´æ™ºèƒ½ï¼