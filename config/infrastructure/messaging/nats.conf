# NATS Server配置文件
# 启用JetStream功能

# 服务器基本配置
port: 4222
server_name: "marketprism-nats"

# 日志配置
log_file: "/tmp/nats-server.log"
logtime: true
debug: false
trace: false

# JetStream配置
jetstream {
    # 存储目录
    store_dir: "/tmp/nats-jetstream"
    
    # 最大内存使用
    max_memory_store: 1GB
    
    # 最大文件存储
    max_file_store: 10GB
    
    # 域名（可选）
    domain: "marketprism"
}

# 监控配置
http_port: 8222

# 集群配置（单节点）
cluster {
    name: "marketprism-cluster"
    port: 6222
}

# 账户和用户配置（简单配置）
accounts {
    $SYS {
        users = [
            {user: "admin", pass: "admin"}
        ]
    }
    
    APP {
        users = [
            {user: "marketprism", pass: "marketprism123"}
        ]
        jetstream: enabled
    }
}

# 默认账户
system_account: "$SYS"

# 连接限制
max_connections: 1000
max_control_line: 4096
max_payload: 1048576
max_pending: 67108864

# 写入超时
write_deadline: "10s"

# 连接超时
ping_interval: "2m"
ping_max: 2