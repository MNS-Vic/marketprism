global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - "/etc/prometheus/rules/*.yml"

alerting:
  alertmanagers:
  - static_configs:
    - targets:
      - alertmanager:9093

scrape_configs:
  # 自身监控
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]

  # Node Exporter 监控
  - job_name: "node"
    static_configs:
      - targets: ["node-exporter:9100"]

  # Go Collector 监控
  - job_name: "go-collector"
    static_configs:
      - targets: ["go-collector:8081"]

  # 数据归档服务监控
  - job_name: "data-archiver"
    static_configs:
      - targets: ["data-archiver:8082"]
    
  # Python数据收集器监控 (替代原ingestion)
  - job_name: "python-collector"
    static_configs:
      - targets: ["python-collector:8080"]
    metrics_path: /metrics
    
  # NATS 监控
  - job_name: "nats"
    static_configs:
      - targets: ["nats:8222"]
    metrics_path: /metrics
    
  # ClickHouse 监控
  - job_name: "clickhouse"
    static_configs:
      - targets: ["clickhouse:9363"]
    metrics_path: /metrics

  # MarketPrism 监控告警服务
  - job_name: "monitoring-alerting"
    static_configs:
      - targets: ["monitoring-alerting:8082"]
    metrics_path: /metrics
    scrape_interval: 10s

  # MarketPrism 数据存储服务
  - job_name: "data-storage"
    static_configs:
      - targets: ["data-storage:8083"]
    metrics_path: /metrics
    scrape_interval: 10s

  # MarketPrism API网关服务
  - job_name: "api-gateway"
    static_configs:
      - targets: ["api-gateway:8080"]
    metrics_path: /metrics
    scrape_interval: 10s

  # MarketPrism 市场数据收集器
  - job_name: "market-data-collector"
    static_configs:
      - targets: ["market-data-collector:8084"]
    metrics_path: /metrics
    scrape_interval: 10s

  # MarketPrism 调度服务
  - job_name: "scheduler"
    static_configs:
      - targets: ["scheduler:8085"]
    metrics_path: /metrics
    scrape_interval: 10s

  # MarketPrism 消息代理服务
  - job_name: "message-broker"
    static_configs:
      - targets: ["message-broker:8086"]
    metrics_path: /metrics
    scrape_interval: 10s