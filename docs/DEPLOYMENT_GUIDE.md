# MarketPrism éƒ¨ç½²æŒ‡å—

## ğŸš¨ é‡è¦ä½¿ç”¨æé†’

### **å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ**

#### **1. é…ç½®æ–‡ä»¶é”™è¯¯**
```yaml
# âŒ é”™è¯¯é…ç½®
data_types: ["trades", "funding_rate"]  # "trades"æ˜¯é”™è¯¯çš„

# âœ… æ­£ç¡®é…ç½®  
data_types: ["trade", "funding_rate"]   # "trade"æ˜¯æ­£ç¡®çš„æšä¸¾å€¼
```

**å¸¸è§æ•°æ®ç±»å‹åç§°é”™è¯¯**ï¼š
- âŒ `"trades"` â†’ âœ… `"trade"`
- âŒ `"positions"` â†’ âœ… `"lsr_top_position"`
- âŒ `"accounts"` â†’ âœ… `"lsr_all_account"`

#### **2. ç³»ç»Ÿå¯åŠ¨é—®é¢˜**
- **ç°è±¡**: å¯åŠ¨åæ— è¾“å‡ºæˆ–å¡æ­»
- **åŸå› **: é…ç½®æ–‡ä»¶ä¸­æ•°æ®ç±»å‹åç§°é”™è¯¯
- **è§£å†³**: æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰data_typeså­—æ®µ

#### **3. NATSè¿æ¥é—®é¢˜**
- **ç°è±¡**: å¯åŠ¨å¤±è´¥ï¼Œæç¤ºNATSè¿æ¥é”™è¯¯
- **è§£å†³**: ç¡®ä¿NATSæœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£4222

## ğŸ“‹ å¯åŠ¨å‰æ£€æŸ¥æ¸…å•

### **å¿…è¦æ¡ä»¶**
- [ ] NATSæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ (`systemctl status nats-server`)
- [ ] Pythonè™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
- [ ] é…ç½®æ–‡ä»¶è¯­æ³•æ­£ç¡®
- [ ] æ•°æ®ç±»å‹åç§°åŒ¹é…ç³»ç»Ÿæšä¸¾
- [ ] ç½‘ç»œè¿æ¥æ­£å¸¸

### **ç³»ç»Ÿèµ„æº**
- [ ] å†…å­˜ > 2GB (æ¨è4GB+)
- [ ] CPU > 2æ ¸å¿ƒ (æ¨è4æ ¸å¿ƒ+)
- [ ] ç£ç›˜ç©ºé—´ > 10GB
- [ ] ç½‘ç»œå¸¦å®½ç¨³å®š

## ğŸš€ æ¸è¿›å¼éƒ¨ç½²ç­–ç•¥

### **é˜¶æ®µ1: åŸºç¡€éªŒè¯**
```yaml
data_types: ["volatility_index"]  # ä»…Deribitæ³¢åŠ¨ç‡æŒ‡æ•°
```
- éªŒè¯ç³»ç»ŸåŸºç¡€åŠŸèƒ½
- ç¡®è®¤é…ç½®æ–‡ä»¶æ­£ç¡®æ€§
- æ£€æŸ¥NATSè¿æ¥

### **é˜¶æ®µ2: æ ¸å¿ƒæ•°æ®**
```yaml
data_types: ["trade", "funding_rate"]
```
- æ·»åŠ å®æ—¶äº¤æ˜“æ•°æ®
- æ·»åŠ 8å°æ—¶èµ„é‡‘è´¹ç‡æ•°æ®
- éªŒè¯å¤šmanageråè°ƒ

### **é˜¶æ®µ3: ä¸­é¢‘æ•°æ®**
```yaml
data_types: ["trade", "funding_rate", "open_interest", "liquidation"]
```
- æ·»åŠ 5åˆ†é’Ÿæœªå¹³ä»“é‡æ•°æ®
- æ·»åŠ å®æ—¶å¼ºå¹³æ•°æ®
- ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨

### **é˜¶æ®µ4: é«˜é¢‘æ•°æ®**
```yaml
data_types: ["trade", "funding_rate", "open_interest", "liquidation", "lsr_top_position"]
```
- æ·»åŠ 10ç§’å¤šç©ºæŒä»“æ¯”ä¾‹æ•°æ®
- æ³¨æ„APIé€Ÿç‡é™åˆ¶
- ç›‘æ§ç½‘ç»œè¯·æ±‚é¢‘ç‡

### **é˜¶æ®µ5: å®Œæ•´é…ç½®**
```yaml
data_types: ["trade", "funding_rate", "open_interest", "liquidation", "lsr_top_position", "lsr_all_account"]
```
- æ‰€æœ‰æ•°æ®ç±»å‹å¯ç”¨
- å…¨é¢ç›‘æ§ç³»ç»Ÿæ€§èƒ½
- å‡†å¤‡ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

## ğŸ”§ å¯åŠ¨å‘½ä»¤

### **å¼€å‘ç¯å¢ƒ**
```bash
cd services/data-collector
source ../../venv/bin/activate
python main.py
```

### **ç”Ÿäº§ç¯å¢ƒ**
```bash
cd services/data-collector
../../venv/bin/python main.py
```

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

### **ç³»ç»Ÿèµ„æºç›‘æ§**
- å†…å­˜ä½¿ç”¨ç‡ < 80%
- CPUä½¿ç”¨ç‡ < 70%
- ç½‘ç»œå»¶è¿Ÿ < 100ms
- é”™è¯¯ç‡ < 1%

### **æ•°æ®è´¨é‡ç›‘æ§**
- WebSocketè¿æ¥ç¨³å®šæ€§
- APIè¯·æ±‚æˆåŠŸç‡
- æ•°æ®æ”¶é›†å®Œæ•´æ€§
- NATSæ¶ˆæ¯å‘å¸ƒæˆåŠŸç‡

## ğŸ†˜ æ•…éšœæ’é™¤

### **å¯åŠ¨å¤±è´¥**
1. æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
2. éªŒè¯æ•°æ®ç±»å‹åç§°
3. ç¡®è®¤NATSæœåŠ¡å™¨çŠ¶æ€
4. æ£€æŸ¥è™šæ‹Ÿç¯å¢ƒæ¿€æ´»

### **æ•°æ®æ”¶é›†å¼‚å¸¸**
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. éªŒè¯äº¤æ˜“æ‰€APIè®¿é—®
3. ç›‘æ§APIé€Ÿç‡é™åˆ¶
4. æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨

### **æ€§èƒ½é—®é¢˜**
1. å‡å°‘å¯ç”¨çš„æ•°æ®ç±»å‹
2. å¢åŠ ç³»ç»Ÿèµ„æºé…ç½®
3. ä¼˜åŒ–ç½‘ç»œè¿æ¥
4. è°ƒæ•´æ”¶é›†é¢‘ç‡

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. å®Œæ•´çš„é”™è¯¯æ—¥å¿—
2. ç³»ç»Ÿé…ç½®ä¿¡æ¯
3. èµ„æºä½¿ç”¨æƒ…å†µ
4. ç½‘ç»œè¿æ¥çŠ¶æ€

---
**MarketPrism Team**  
æœ€åæ›´æ–°: 2025-07-30
