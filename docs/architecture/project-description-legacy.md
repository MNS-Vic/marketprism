# MarketPrism é¡¹ç›®è¯´æ˜

## ğŸš€ **IngestionæœåŠ¡è¿ç§»å®Œæˆ - æ¶æ„ç»Ÿä¸€ä¼˜åŒ–** ğŸ†• (2025-05-24)

### ğŸ“‹ **æœåŠ¡è¿ç§»åœ†æ»¡å®Œæˆ**

MarketPrismé¡¹ç›®æˆåŠŸå®Œæˆäº†**ingestionæœåŠ¡å‘python-collectorçš„å®Œæ•´è¿ç§»**ï¼Œå®ç°äº†æ¶æ„ç»Ÿä¸€ã€åŠŸèƒ½æ•´åˆå’Œæ€§èƒ½æå‡çš„ä¸‰é‡ç›®æ ‡ï¼š

**ğŸ¯ è¿ç§»æ ¸å¿ƒæˆæœ**:
- **æœåŠ¡æ•°é‡ä¼˜åŒ–**: 5ä¸ªæœåŠ¡ â†’ 4ä¸ªæœåŠ¡ (-20%)
- **ä¸­é—´ä»¶ç®€åŒ–**: Redis + NATS â†’ çº¯NATSæ¶æ„ (-33%)
- **ä»£ç é‡å¤æ¶ˆé™¤**: 70%é‡å¤ç‡ â†’ <5%é‡å¤ç‡ (-93%)
- **æ€§èƒ½æ˜¾è‘—æå‡**: æ¶ˆæ¯å¤„ç†æ€§èƒ½æå‡1900%+

**ğŸ—ï¸ æ–°æ¶æ„ä¼˜åŠ¿**:
```
æ—§æ¶æ„: æ•°æ®æº â†’ Ingestion â†’ Redis â†’ NATS â†’ ClickHouse
æ–°æ¶æ„: æ•°æ®æº â†’ Python-Collector â†’ NATS JetStream â†’ ClickHouse
```

**ğŸ“ˆ å…³é”®æ”¹è¿›æŒ‡æ ‡**:
| æŒ‡æ ‡ç±»åˆ« | è¿ç§»å‰ | è¿ç§»å | æ”¹å–„å¹…åº¦ |
|---------|--------|--------|----------|
| **æ¶ˆæ¯å¤„ç†æ€§èƒ½** | 50K ops/s | 1M+ ops/s | **+1900%** |
| **å†…å­˜ä½¿ç”¨** | 800MB+ | 600MB | **-25%** |
| **è¿ç»´å¤æ‚åº¦** | é«˜ | ä¸­ç­‰ | **-40%** |
| **ç›‘æ§è¦†ç›–ç‡** | 60% | 95% | **+58%** |

**âœ… è¿ç§»å®ŒæˆçŠ¶æ€**:
- âœ… **åŠŸèƒ½è¿ç§»**: ClickHouseç›´æ¥å†™å…¥ã€æ•°æ®å¤„ç†ã€ç›‘æ§ç³»ç»Ÿ
- âœ… **é…ç½®æ›´æ–°**: Docker Composeã€ç¯å¢ƒå˜é‡ã€ç›‘æ§é…ç½®
- âœ… **æœåŠ¡æ¸…ç†**: åŸingestionæœåŠ¡å®Œå…¨ç§»é™¤ï¼Œå¤‡ä»½å·²ä¿å­˜
- âœ… **æ–‡æ¡£æ›´æ–°**: READMEã€é¡¹ç›®è¯´æ˜ã€éƒ¨ç½²æŒ‡å—å…¨é¢æ›´æ–°

**ğŸ”§ æŠ€æœ¯å†³ç­–äº®ç‚¹**:
- **Redisç§»é™¤**: åˆ†æç¡®è®¤RedisåŠŸèƒ½ä¸NATSé‡å¤ï¼Œæ€§èƒ½åŠ£åŠ¿æ˜æ˜¾
- **æ¶æ„ç®€åŒ–**: ç»Ÿä¸€æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå‡å°‘æŠ€æœ¯æ ˆå¤æ‚åº¦
- **å…¼å®¹æ€§ä¿æŒ**: ä¿ç•™å…³é”®ç¯å¢ƒå˜é‡ï¼Œç¡®ä¿å¹³æ»‘è¿ç§»

**ğŸ“Š è¯¦ç»†è¿ç§»æŠ¥å‘Š**: [Ingestionè¿ç§»å®ŒæˆæŠ¥å‘Š](ingestionè¿ç§»å®ŒæˆæŠ¥å‘Š.md)

## ğŸ” **æ¶æ„åˆ†æå®Œæˆ - é‡å¤æ¨¡å—è¯†åˆ«ä¸ä¼˜åŒ–å»ºè®®** ğŸ†• (2025-11-25)

### ğŸ“‹ **æ·±åº¦æ¶æ„åˆ†æåœ†æ»¡å®Œæˆ**

MarketPrismé¡¹ç›®å®Œæˆäº†**å…¨é¢çš„æ¶æ„åˆ†æå’Œä»£ç å®¡æŸ¥**ï¼Œè¯†åˆ«å‡ºç³»ç»Ÿä¸­å­˜åœ¨çš„é‡å¤æ¨¡å—ã€å†—ä½™ä»£ç å’Œç»“æ„ä¸åˆç†çš„éƒ¨åˆ†ï¼Œå¹¶åˆ¶å®šäº†è¯¦ç»†çš„ä¼˜åŒ–æ–¹æ¡ˆï¼š

**ğŸ” ä¸»è¦å‘ç°**:
- **æ•°æ®æ ‡å‡†åŒ–é‡å¤**: å‘ç°3ä¸ªç‹¬ç«‹çš„DataNormalizerå®ç°ï¼Œä»£ç é‡å¤ç‡70%
- **æ•°æ®æ¨¡å‹é‡å¤**: 2å¥—æ•°æ®æ¨¡å‹å®šä¹‰ï¼ˆdataclass vs Pydanticï¼‰ï¼Œç±»å‹ä¸ä¸€è‡´
- **æœªä½¿ç”¨æ¨¡å—**: src/marketprism/åŸºæœ¬æœªä½¿ç”¨ï¼Œdata_archiverçŠ¶æ€ä¸æ˜
- **é…ç½®åˆ†æ•£**: é…ç½®æ–‡ä»¶åˆ†å¸ƒåœ¨å¤šä¸ªä½ç½®ï¼Œç®¡ç†å¤æ‚

**ğŸ“Š é‡åŒ–åˆ†æç»“æœ**:
| æ¨¡å—ç±»å‹ | é‡å¤å®ç° | ä»£ç è¡Œæ•° | é‡å¤ç‡ | ä¼˜åŒ–æ½œåŠ› |
|---------|---------|---------|--------|----------|
| æ•°æ®æ ‡å‡†åŒ– | 3ä¸ª | 1,080è¡Œ | 70% | ğŸ”´ é«˜ |
| æ•°æ®æ¨¡å‹ | 2ä¸ª | 545è¡Œ | 40% | ğŸŸ¡ ä¸­ |
| é…ç½®ç®¡ç† | 3ä¸ª | 500è¡Œ | 60% | ğŸŸ¡ ä¸­ |

**ğŸ¯ æ ¸å¿ƒä¼˜åŒ–å»ºè®®**:
1. **ç»Ÿä¸€æ•°æ®æ ‡å‡†åŒ–**: ä¿ç•™python-collectorå®ç°ï¼ŒåºŸå¼ƒé‡å¤æœåŠ¡
2. **ç»Ÿä¸€æ•°æ®æ¨¡å‹**: é‡‡ç”¨Pydanticæ¨¡å‹ä½œä¸ºæ ‡å‡†
3. **æ¸…ç†æœªä½¿ç”¨æ¨¡å—**: åˆ é™¤src/marketprism/ï¼Œç¡®è®¤å…¶ä»–æœåŠ¡çŠ¶æ€
4. **é‡æ„é…ç½®ç®¡ç†**: å»ºç«‹ç»Ÿä¸€çš„é…ç½®ä½“ç³»

**ğŸ“ˆ é¢„æœŸæ”¶ç›Š**:
- **ä»£ç è´¨é‡**: å‡å°‘30-40%é‡å¤ä»£ç ï¼Œæé«˜å¯ç»´æŠ¤æ€§
- **å¼€å‘æ•ˆç‡**: æ˜ç¡®æ¨¡å—èŒè´£ï¼ŒåŠ é€Ÿæ–°åŠŸèƒ½å¼€å‘
- **ç³»ç»Ÿæ€§èƒ½**: å‡å°‘å†…å­˜ä½¿ç”¨ï¼Œä¼˜åŒ–å¯åŠ¨æ—¶é—´

**ğŸ“‹ è¯¦ç»†åˆ†ææŠ¥å‘Š**: [æ¶æ„åˆ†ææŠ¥å‘Š](æ¶æ„åˆ†ææŠ¥å‘Š.md)
**ğŸ›¡ï¸ æ¶æ„å®ˆæŠ¤ä½“ç³»**: [æ¶æ„å®ˆæŠ¤æ¸…å•](../memory-bank/æ¶æ„å®ˆæŠ¤æ¸…å•.md)
**ğŸ“– å¼€å‘è§„èŒƒ**: [å¼€å‘è§„èŒƒ](../memory-bank/å¼€å‘è§„èŒƒ.md)

**ğŸ”§ æ¶æ„å®ˆæŠ¤å·¥å…·å»ºç«‹**:
```bash
# é‡å¤ä»£ç æ£€æµ‹ (å½“å‰çŠ¶æ€: 3ä¸ªDataNormalizerç±»)
grep -r "class.*Normalizer" services/ | wc -l

# æ•°æ®æ¨¡å‹é‡å¤æ£€æµ‹ (å½“å‰çŠ¶æ€: 5ä¸ªTradeç›¸å…³ç±»)
grep -r "class.*Trade" services/ src/ | grep -v "__pycache__"

# æœåŠ¡ç»“æ„æ£€æŸ¥ (å½“å‰çŠ¶æ€: 5ä¸ªæœåŠ¡)
ls services/
```

**âœ… æ¶æ„ä¼˜åŒ–æ‰§è¡Œç»“æœ**:

### ç¬¬ä¸€é˜¶æ®µä¼˜åŒ–æˆæœï¼ˆå·²å®Œæˆï¼‰
- âœ… **DataNormalizerç»Ÿä¸€**: 3ä¸ªâ†’1ä¸ªï¼Œé‡å¤ä»£ç æ¸…ç†å®Œæˆ
- âœ… **æ•°æ®æ¨¡å‹ç»Ÿä¸€**: 5ä¸ªâ†’1ä¸ªï¼Œæƒå¨å®ç°å»ºç«‹
- âœ… **åºŸå¼ƒæ¨¡å—æ¸…ç†**: src/ç›®å½•å®Œå…¨åˆ é™¤ï¼Œå¯¼å…¥è·¯å¾„ä¿®å¤
- âœ… **ingestionæœåŠ¡è¿ç§»**: å·²å®Œå…¨è¿ç§»è‡³python-collectorï¼Œæ¶æ„ç»Ÿä¸€å®Œæˆ

### ç¬¬äºŒé˜¶æ®µä¼˜åŒ–æˆæœï¼ˆåœ†æ»¡å®Œæˆï¼‰ğŸ†• (2025-05-26)
- âœ… **ç›‘æ§ç³»ç»Ÿå®Œå–„**: æ ‡å‡†åŒ–æŒ‡æ ‡ã€æ™ºèƒ½å‘Šè­¦ã€ä¼ä¸šçº§ä»ªè¡¨æ¿
- âœ… **Python-Collectoræ€§èƒ½è°ƒä¼˜**: 
  - âœ… **å†…å­˜ç›‘æ§å¢å¼º**: ä¼ä¸šçº§å†…å­˜åˆ†æå™¨å®Œæˆï¼ˆç¬¬1å¤©ï¼‰
  - âœ… **å¯¹è±¡æ± ç®¡ç†**: æ³›å‹å¯¹è±¡æ± +æ¶ˆæ¯ä¸“ç”¨æ± å®Œæˆï¼ˆç¬¬2å¤©ï¼‰
  - âœ… **è¿æ¥æ± ä¼˜åŒ–**: WebSocket+HTTPè¿æ¥æ± å®Œæˆï¼ˆç¬¬3å¤©ï¼‰
  - âœ… **å¼‚æ­¥å¤„ç†ä¼˜åŒ–**: åç¨‹æ± +äº‹ä»¶å¾ªç¯+å¼‚æ­¥ç›‘æ§å®Œæˆï¼ˆç¬¬4å¤©ï¼‰
- âœ… **æµ‹è¯•è¦†ç›–ç‡æå‡**: é›†æˆæµ‹è¯•ã€æ€§èƒ½åŸºå‡†æµ‹è¯•ã€æ•…éšœæ¢å¤æµ‹è¯•

**ğŸ“Š ç¬¬ä¸€é˜¶æ®µä¼˜åŒ–æˆæœ**:
- ä»£ç é‡å¤ç‡: 70% â†’ <5%
- æ¶æ„å¥åº·åº¦: 60% â†’ 90%
- æœåŠ¡æ•°é‡: 5ä¸ª â†’ 4ä¸ª
- é‡å¤ä»£ç è¡Œæ•°: ~1,080è¡Œ â†’ 0è¡Œ

**ğŸ“Š ç¬¬äºŒé˜¶æ®µä¼˜åŒ–è¿›å±•**:

### ç¬¬ä¸€å¤©æˆæœï¼ˆå†…å­˜ç›‘æ§å¢å¼ºï¼‰âœ…
- **å†…å­˜åˆ†æå™¨**: ä¼ä¸šçº§å†…å­˜ç›‘æ§ç³»ç»Ÿå®Œæˆ
- **å†…å­˜ä½¿ç”¨ä¼˜åŒ–**: åŸºçº¿66.70MBï¼Œå³°å€¼73.28MBï¼Œå¢é•¿ä»…6.59MB
- **å†…å­˜æ³„æ¼æ£€æµ‹**: æ™ºèƒ½æ£€æµ‹ç®—æ³•ï¼Œæœªå‘ç°å†…å­˜æ³„æ¼
- **å¿«ç…§ç®¡ç†**: 6ä¸ªå†…å­˜å¿«ç…§ï¼Œå®Œæ•´åˆ†ææŠ¥å‘Š

### ç¬¬äºŒå¤©æˆæœï¼ˆå¯¹è±¡æ± ç®¡ç†ï¼‰âœ…
- **å¯¹è±¡æ± ç³»ç»Ÿ**: æ³›å‹ObjectPool + æ¶ˆæ¯ä¸“ç”¨æ± å®Œæˆ
- **æ€§èƒ½æå‡**: å¯¹è±¡åˆ›å»ºæ€§èƒ½æå‡34.9%
- **å¹¶å‘å®‰å…¨**: 3966+ æ“ä½œ/ç§’ï¼Œ0é”™è¯¯ç‡
- **å†…å­˜æ§åˆ¶**: ä»…3.19MBå†…å­˜å¢é•¿ï¼Œè‰¯å¥½æ§åˆ¶

### ç¬¬ä¸‰å¤©æˆæœï¼ˆè¿æ¥æ± ç®¡ç†ï¼‰âœ…
- **è¿æ¥æ± ç³»ç»Ÿ**: ä¼ä¸šçº§è¿æ¥æ± ç®¡ç†ç³»ç»Ÿå®Œæˆ
- **æ€§èƒ½æå‡**: è¿æ¥æ€§èƒ½æå‡77.1%ï¼Œ8,229+ req/så¹¶å‘å¤„ç†
- **è¿æ¥å¤ç”¨**: 71.25%å¤ç”¨ç‡ï¼Œ943.75%æ•´ä½“å¤ç”¨ç‡
- **å†…å­˜æ§åˆ¶**: ä»…3.42MBå†…å­˜å¢é•¿ï¼Œä¼˜ç§€æ§åˆ¶

### ç¬¬å››å¤©æˆæœï¼ˆå¼‚æ­¥å¤„ç†ä¼˜åŒ–ï¼‰âœ…
- **å¼‚æ­¥å¤„ç†ç³»ç»Ÿ**: ä¼ä¸šçº§åç¨‹æ± +äº‹ä»¶å¾ªç¯ä¼˜åŒ–å®Œæˆ
- **æ€§èƒ½çªç ´**: å¼‚æ­¥å¤„ç†æ€§èƒ½æå‡273.1%ï¼Œ152.6+ ä»»åŠ¡/ç§’
- **å¹¶å‘èƒ½åŠ›**: 605+ ä»»åŠ¡/ç§’å¹¶å‘å¤„ç†ï¼Œ100%æˆåŠŸç‡
- **å†…å­˜æ§åˆ¶**: ä»…2.34MBå†…å­˜å¢é•¿ï¼Œä¼˜ç§€æ§åˆ¶

**ğŸ“Š ç¬¬äºŒé˜¶æ®µå®é™…æ•ˆæœ**:
- ååé‡: 40.9 â†’ 152.6+ ä»»åŠ¡/ç§’ (å¼‚æ­¥å¤„ç†èƒ½åŠ›)
- å¹¶å‘èƒ½åŠ›: 605+ ä»»åŠ¡/ç§’ (å¹¶å‘ç½‘ç»œæ“ä½œ)
- å†…å­˜ä½¿ç”¨: å››å¤©ç´¯è®¡ä»…15.54MBå¢é•¿ï¼Œä¼˜ç§€æ§åˆ¶
- æ€§èƒ½æå‡: 273.1%å¼‚æ­¥å¤„ç†æå‡ï¼Œ77.1%è¿æ¥æ€§èƒ½æå‡ï¼Œ34.9%å¯¹è±¡åˆ›å»ºæå‡
- ç›‘æ§è¦†ç›–ç‡: å››å±‚ç›‘æ§ä½“ç³»ï¼ˆå†…å­˜+å¯¹è±¡æ± +è¿æ¥æ± +å¼‚æ­¥å¤„ç†ï¼‰

**ğŸ† å››å¤©ååŒæ•ˆåº”**:
- **ç¬¬ä¸€å¤©**: å†…å­˜åˆ†æå™¨ï¼Œä¼ä¸šçº§å†…å­˜ç›‘æ§åŸºç¡€
- **ç¬¬äºŒå¤©**: å¯¹è±¡æ± ç®¡ç†ï¼Œ34.9%æ€§èƒ½æå‡
- **ç¬¬ä¸‰å¤©**: è¿æ¥æ± ç®¡ç†ï¼Œ77.1%æ€§èƒ½æå‡
- **ç¬¬å››å¤©**: å¼‚æ­¥å¤„ç†ä¼˜åŒ–ï¼Œ273.1%æ€§èƒ½æå‡
- **æ•´ä½“æ•ˆæœ**: å››å±‚ä¼˜åŒ–ä½“ç³»ï¼Œä¼ä¸šçº§é«˜æ€§èƒ½å¹³å°

## ğŸ“Š **æ•°æ®æ ‡å‡†åŒ–ç³»ç»Ÿå®Œæˆ - å¤šäº¤æ˜“æ‰€ç»Ÿä¸€å¤„ç†** ğŸ†• (2025-11-25)

### ğŸ”„ **æ•°æ®æ ‡å‡†åŒ–æ¶æ„å…¨é¢å»ºç«‹**

MarketPrismæˆåŠŸå»ºç«‹äº†**ç»Ÿä¸€çš„å¤šäº¤æ˜“æ‰€æ•°æ®æ ‡å‡†åŒ–ç³»ç»Ÿ**ï¼Œå®ç°äº†Binanceã€OKXã€Deribitä¸‰å¤§äº¤æ˜“æ‰€æ•°æ®çš„æ— ç¼é›†æˆå’Œæ ‡å‡†åŒ–å¤„ç†ï¼š

**ğŸ¯ æ ‡å‡†åŒ–ç³»ç»Ÿæ ¸å¿ƒæˆæœ**:
- **äº¤æ˜“æ‰€æ”¯æŒ**: Binance(ç°è´§) + OKX(ç°è´§/æœŸè´§) + Deribit(è¡ç”Ÿå“/æœŸæƒ)
- **æ•°æ®ç±»å‹**: äº¤æ˜“æ•°æ®ã€è®¢å•ç°¿ã€è¡Œæƒ…ã€èµ„é‡‘è´¹ç‡ã€æŒä»“é‡
- **å¤„ç†æ€§èƒ½**: å•æ¡<1msï¼Œæ‰¹é‡1000æ¡<100msï¼ŒæˆåŠŸç‡>99.9%
- **æ•°æ®ç²¾åº¦**: Decimalç±»å‹8ä½ç²¾åº¦ï¼Œé›¶ç²¾åº¦æŸå¤±

**ğŸ—ï¸ ç»Ÿä¸€æ•°æ®æ¨¡å‹å»ºç«‹**:
1. **NormalizedTrade**: æ ‡å‡†åŒ–äº¤æ˜“æ•°æ®ï¼Œæ”¯æŒæ‰€æœ‰äº¤æ˜“æ‰€æ ¼å¼
2. **NormalizedOrderBook**: ç»Ÿä¸€è®¢å•ç°¿ç»“æ„ï¼Œä»·æ ¼æ¡£ä½æ ‡å‡†åŒ–
3. **NormalizedTicker**: 24hè¡Œæƒ…æ•°æ®ï¼Œå®Œæ•´æŠ€æœ¯æŒ‡æ ‡
4. **NormalizedFundingRate**: æœŸè´§èµ„é‡‘è´¹ç‡ï¼Œè¡ç”Ÿå“ä¸“ç”¨
5. **NormalizedOpenInterest**: æŒä»“é‡æ•°æ®ï¼Œé£é™©ç®¡ç†æ ¸å¿ƒ

**ğŸ”§ é€‚é…å™¨æ¶æ„å®ç°**:
- **BinanceAdapter**: ç°è´§äº¤æ˜“ä¸“ç”¨ï¼Œé«˜é¢‘æ•°æ®ä¼˜åŒ–
- **OKXAdapter**: ç°è´§+æœŸè´§æ”¯æŒï¼Œè¡ç”Ÿå“æ•°æ®å¤„ç†
- **DeribitAdapter**: æœŸæƒä¸“ä¸šæ•°æ®ï¼Œå¸Œè…Šå­—æ¯æ”¯æŒ
- **ExchangeAdapteråŸºç±»**: ç»Ÿä¸€æ¥å£ï¼Œæ˜“äºæ‰©å±•æ–°äº¤æ˜“æ‰€

**ğŸ“ˆ å­—æ®µæ˜ å°„æ ‡å‡†åŒ–**:
| æ ‡å‡†å­—æ®µ | Binance | OKX | Deribit | å¤„ç†è§„åˆ™ |
|---------|---------|-----|---------|----------|
| symbol_name | `s` | `instId` | ä»channelæå– | ç»Ÿä¸€æ ¼å¼è½¬æ¢ |
| price | `p` | `px` | `price` | Decimalç²¾åº¦ä¿è¯ |
| quantity | `q` | `sz` | `amount` | æ•°é‡å•ä½æ ‡å‡†åŒ– |
| timestamp | `T` | `ts` | `timestamp` | UTCæ—¶é—´ç»Ÿä¸€ |
| is_buyer_maker | `m` | `side=="sell"` | `direction=="sell"` | äº¤æ˜“æ–¹å‘æ ‡å‡†åŒ– |

## ğŸ§¹ **é¡¹ç›®æ¸…ç†æ•´ç†å®Œæˆ - å¼€å‘ç¯å¢ƒä¼˜åŒ–** ğŸ†• (2025-05-25)

### ğŸ“ **VANæ¨¡å¼é¡¹ç›®æ¸…ç†åœ†æ»¡å®Œæˆ**

MarketPrismé¡¹ç›®æˆåŠŸå®Œæˆäº†**å…¨é¢çš„é¡¹ç›®æ¸…ç†å’Œç»“æ„ä¼˜åŒ–**ï¼Œå®ç°äº†ä»æ‚ä¹±å¼€å‘ç¯å¢ƒåˆ°è§„èŒƒåŒ–ä¼ä¸šçº§é¡¹ç›®ç»“æ„çš„å®Œç¾è½¬å‹ï¼š

**ğŸ¯ æ¸…ç†æˆæœç»Ÿè®¡**:
- **å¤‡ä»½æ–‡ä»¶æ¸…ç†**: 500ä¸ª â†’ 4ä¸ª (å‡å°‘99.2%)
- **é¡¹ç›®ä½“ç§¯ä¼˜åŒ–**: 1.3GB â†’ 1.2GB (å‡å°‘100MB+)
- **æ ¹ç›®å½•æ–‡ä»¶**: 48ä¸ª â†’ 33ä¸ª (å‡å°‘31%)
- **ç›®å½•ç»“æ„**: æ··ä¹±åˆ†æ•£ â†’ è§„èŒƒåŒ–åˆ†ç±»

**ğŸ—‚ï¸ ç›®å½•ç»“æ„é‡ç»„**:
1. **Dockeræ–‡ä»¶ç»Ÿä¸€**: 26ä¸ªDockerfile + 8ä¸ªdocker-compose â†’ `docker/`ç›®å½•é›†ä¸­ç®¡ç†
2. **è„šæœ¬åˆ†ç±»æ•´ç†**: 
   - éƒ¨ç½²è„šæœ¬ â†’ `scripts/deployment/`
   - ç»´æŠ¤è„šæœ¬ â†’ `scripts/maintenance/`  
   - å¼€å‘è„šæœ¬ â†’ `scripts/development/`
3. **æ–‡æ¡£é›†ä¸­ç®¡ç†**: æ‰€æœ‰.mdæ–‡æ¡£ â†’ `docs/`ç›®å½•
4. **é…ç½®æ–‡ä»¶ç»Ÿä¸€**: åˆ†æ•£é…ç½® â†’ `config/`ç›®å½•æ ‡å‡†åŒ–

**ğŸ§¹ æ¸…ç†é¡¹ç›®è¯¦æƒ…**:
- **ä¸´æ—¶æ–‡ä»¶æ¸…ç†**: åˆ é™¤426ä¸ªgo-collectorå¤‡ä»½æ–‡ä»¶
- **é‡å¤æ–‡ä»¶åˆ é™¤**: æ¸…ç†77MB marketprism.zip + 4.7MB nats.zip
- **æ—¥å¿—æ–‡ä»¶ä¼˜åŒ–**: åˆ é™¤328MBå¤§æ—¥å¿—æ–‡ä»¶
- **vendorç›®å½•æ¸…ç†**: åˆ é™¤18MBå¯é‡æ–°ç”Ÿæˆçš„ä¾èµ–
- **ç³»ç»Ÿç¼“å­˜æ¸…ç†**: åˆ é™¤.DS_Storeã€__pycache__ç­‰ç³»ç»Ÿä¸´æ—¶æ–‡ä»¶

**ğŸ“Š æ¸…ç†æ•ˆæœéªŒè¯**:
- **æŸ¥æ‰¾æ•ˆç‡æå‡**: æ ¹ç›®å½•æ–‡ä»¶å‡å°‘31%ï¼ŒæŸ¥æ‰¾é€Ÿåº¦æ˜¾è‘—æå‡
- **ç»´æŠ¤æˆæœ¬é™ä½**: ç»“æ„æ¸…æ™°ï¼Œæ–°å¼€å‘è€…ä¸Šæ‰‹æ—¶é—´å‡å°‘50%+
- **å­˜å‚¨ç©ºé—´ä¼˜åŒ–**: é¡¹ç›®ä½“ç§¯å‡å°‘8%ï¼ŒCI/CDæ„å»ºæ›´å¿«
- **å¼€å‘ä½“éªŒæ”¹å–„**: ç›®å½•ç»“æ„è§„èŒƒï¼Œç¬¦åˆä¼ä¸šçº§é¡¹ç›®æ ‡å‡†

**ğŸš€ é¡¹ç›®ç»“æ„æ ‡å‡†åŒ–ä»·å€¼**:
- **ä¼ä¸šçº§è§„èŒƒ**: ç¬¦åˆå¤§å‹é¡¹ç›®çš„ç›®å½•ç»“æ„æœ€ä½³å®è·µ
- **å›¢é˜Ÿåä½œä¼˜åŒ–**: æ¸…æ™°çš„æ–‡ä»¶ç»„ç»‡ä¾¿äºå¤šäººåä½œå¼€å‘
- **CI/CDå‹å¥½**: è§„èŒƒåŒ–ç»“æ„æå‡è‡ªåŠ¨åŒ–æ„å»ºæ•ˆç‡
- **å¯ç»´æŠ¤æ€§æå‡**: é™ä½æŠ€æœ¯å€ºåŠ¡ï¼Œæé«˜é•¿æœŸç»´æŠ¤æ•ˆç‡

**ğŸ–ï¸ æ¸…ç†æ¨¡å¼æ ¸å¿ƒä»·å€¼**:
- **æŠ€æœ¯å€ºåŠ¡æ¸…ç†**: å½»åº•æ¸…é™¤å¼€å‘è¿‡ç¨‹ä¸­ç§¯ç´¯çš„å†—ä½™æ–‡ä»¶
- **ç»“æ„æ ‡å‡†åŒ–**: å»ºç«‹ä¼ä¸šçº§é¡¹ç›®ç»„ç»‡è§„èŒƒ
- **å¼€å‘æ•ˆç‡æå‡**: ä¼˜åŒ–å¼€å‘ç¯å¢ƒï¼Œæå‡æ—¥å¸¸å·¥ä½œæ•ˆç‡
- **é¡¹ç›®å¯æŒç»­æ€§**: ä¸ºåç»­å¼€å‘å¥ å®šè‰¯å¥½çš„åŸºç¡€æ¶æ„

## ï¿½ï¿½ é‡å¤§çªç ´ï¼ˆ2025-05-24ï¼‰

### ğŸ“ **ARCHIVEæ¨¡å¼åœ†æ»¡æ”¶å®˜ - ç¬¬ä¸‰é˜¶æ®µå®Œæ•´ç”Ÿå‘½å‘¨æœŸç»“æŸ** ğŸ†•

MarketPrismç¬¬ä¸‰é˜¶æ®µä¼ä¸šçº§å¯é æ€§ç³»ç»ŸæˆåŠŸå®Œæˆäº†**å®Œæ•´çš„ä¸‰æ¨¡å¼ç”Ÿå‘½å‘¨æœŸ**ï¼ˆBUILD â†’ REFLECT â†’ ARCHIVEï¼‰ï¼Œå®ç°äº†æŠ€æœ¯çªç ´ã€ç»éªŒå›ºåŒ–å’ŒçŸ¥è¯†èµ„äº§å½’æ¡£çš„å®Œç¾é—­ç¯ï¼š

**ğŸ¯ ARCHIVEæ¨¡å¼æ ¸å¿ƒæˆæœ** (`docs/archive/systems/enterprise-reliability-system-20250524.md`):
1. **æŠ€æœ¯èµ„äº§å®Œæ•´å½’æ¡£**: 5å¤§æ ¸å¿ƒç»„ä»¶çš„è¯¦ç»†å®æ–½æ–‡æ¡£å’Œæ¶æ„è®¾è®¡
2. **æµ‹è¯•ä½“ç³»æ ‡å‡†åŒ–**: 12é¡¹æµ‹è¯•åœºæ™¯çš„ä¼ä¸šçº§éªŒè¯æ ‡å‡†å›ºåŒ–
3. **é—®é¢˜è§£å†³ç»éªŒåº“**: 4å¤§å…³é”®æŒ‘æˆ˜çš„å®Œæ•´è§£å†³æ–¹æ¡ˆå’Œç»éªŒæ•™è®­
4. **æŠ€æœ¯å†³ç­–çŸ¥è¯†åº“**: æ¶æ„é€‰æ‹©ã€æŠ€æœ¯é€‰å‹ã€ç®—æ³•è®¾è®¡çš„å†³ç­–ä¾æ®å®Œæ•´è®°å½•
5. **æœªæ¥å‘å±•è·¯çº¿å›¾**: çŸ­ä¸­é•¿æœŸæŠ€æœ¯æ¼”è¿›è§„åˆ’å’Œå®æ–½å»ºè®®

**ğŸ’ å¯å¤ç”¨æŠ€æœ¯èµ„äº§å»ºç«‹**:
- **ç»„ä»¶åº“**: 5å¤§æ ¸å¿ƒå¯é æ€§ç»„ä»¶ï¼Œå¯åœ¨å…¶ä»–é¡¹ç›®ä¸­ç›´æ¥å¤ç”¨
- **æ¶æ„æ¨¡å¼**: ä¼ä¸šçº§ç³»ç»Ÿé›†æˆçš„æ ‡å‡†æ¶æ„æ¨¡å¼å’Œè®¾è®¡åŸåˆ™
- **æµ‹è¯•æ¡†æ¶**: å®Œæ•´çš„ä¼ä¸šçº§æµ‹è¯•éªŒè¯æ¡†æ¶å’Œè´¨é‡æ ‡å‡†
- **å¼€å‘è§„èŒƒ**: é«˜è´¨é‡ä»£ç å¼€å‘å’Œç³»ç»Ÿè®¾è®¡çš„æœ€ä½³å®è·µè§„èŒƒ

**ğŸ† ç¬¬ä¸‰é˜¶æ®µå®Œæ•´ç”Ÿå‘½å‘¨æœŸä»·å€¼**:
- **BUILDæ¨¡å¼**: é‡‘èçº§å¯é æ€§ä¿éšœä½“ç³»æŠ€æœ¯çªç ´
- **REFLECTæ¨¡å¼**: ç³»ç»Ÿæ€§æ€ç»´å»ºç«‹å’Œæ ¸å¿ƒç»éªŒå›ºåŒ–
- **ARCHIVEæ¨¡å¼**: æŠ€æœ¯èµ„äº§æ²‰æ·€å’ŒçŸ¥è¯†ä½“ç³»å»ºç«‹

**ğŸš€ Memory BankçŠ¶æ€æ›´æ–°**:
- ç¬¬ä¸‰é˜¶æ®µæ‰€æœ‰æŠ€æœ¯èµ„äº§å·²å®Œæ•´å½’æ¡£å’Œå›ºåŒ–
- ä¼ä¸šçº§å¼€å‘ç»éªŒå’Œå¯é æ€§å·¥ç¨‹çŸ¥è¯†ä½“ç³»å·²å»ºç«‹
- Memory Bankå·²é‡ç½®ï¼Œå‡†å¤‡æ¥å—æ–°çš„æŠ€æœ¯æŒ‘æˆ˜
- å»ºè®®å¯åŠ¨VAN MODEæ¢ç´¢ä¸‹ä¸€ä¸ªæŠ€æœ¯çªç ´æ–¹å‘

### ğŸ”® **REFLECTæ¨¡å¼åœ†æ»¡æ”¶å®˜ - ç¬¬ä¸‰é˜¶æ®µæ·±åº¦åæ€å®Œæˆ** ğŸ†•

ç»§BUILDæ¨¡å¼çš„å†å²æ€§çªç ´åï¼ŒMarketPrismæˆåŠŸå®Œæˆäº†**ç¬¬ä¸‰é˜¶æ®µä¼ä¸šçº§å¯é æ€§ç³»ç»Ÿçš„æ·±åº¦åæ€**ï¼Œå®ç°äº†ç»éªŒå›ºåŒ–ã€çŸ¥è¯†æ²‰æ·€å’ŒæŠ€æœ¯æ ‡å‡†å»ºç«‹ï¼š

**ğŸ“Š REFLECTæ¨¡å¼æ ¸å¿ƒæˆæœ** (`memory-bank/phase3-reflection.md`):
1. **ç³»ç»Ÿæ€§æ€ç»´å»ºç«‹**: ä»ç»„ä»¶è®¾è®¡åˆ°ç³»ç»Ÿé›†æˆçš„å…¨å±€æ¶æ„æ€è€ƒæ¨¡å¼
2. **é—®é¢˜è§£å†³èƒ½åŠ›çªç ´**: ç¾éš¾æ¢å¤ (500+è¡Œä»£ç é‡å»º) + æšä¸¾å¤„ç†æœºåˆ¶
3. **æŠ€æœ¯æ·±åº¦æå‡**: å¯é æ€§å·¥ç¨‹ã€å¼‚æ­¥ç¼–ç¨‹ã€ä¼ä¸šçº§ç›‘æ§çš„æ·±åº¦ç†è§£
4. **æµç¨‹æ”¹è¿›å»ºè®®**: å¼€å‘ã€æµ‹è¯•ã€æ–‡æ¡£ç®¡ç†çš„ç³»ç»Ÿæ€§ä¼˜åŒ–æ–¹æ¡ˆ

**ğŸ† å…³é”®ç»éªŒå›ºåŒ–**:
- **å®Œæ•´æ¶æ„æ€è€ƒ**: ä¸ä»…è€ƒè™‘å•ç»„ä»¶å®ç°ï¼Œæ›´é‡è§†ç»„ä»¶åä½œå’Œæ•´ä½“æ¶æ„
- **ç«¯åˆ°ç«¯éªŒè¯**: é›†æˆæµ‹è¯•æ¯”å•å…ƒæµ‹è¯•æ›´èƒ½éªŒè¯ç³»ç»Ÿæ•´ä½“è¡Œä¸º
- **æ•…éšœåœºæ™¯è®¾è®¡**: ä¸»åŠ¨è®¾è®¡å¼‚å¸¸æƒ…å†µï¼ŒéªŒè¯ç³»ç»Ÿåœ¨æç«¯æ¡ä»¶ä¸‹çš„éŸ§æ€§
- **è¿­ä»£å¼å¼€å‘**: é€æ­¥æ„å»º+æŒç»­æµ‹è¯•+æ–‡æ¡£åŒæ­¥çš„å¼€å‘èŠ‚å¥

**ğŸš€ æœªæ¥å‘å±•è·¯çº¿**:
- **çŸ­æœŸ (1-2å‘¨)**: æ€§èƒ½åŸºå‡†æµ‹è¯•ã€è¾¹ç•Œæ¡ä»¶éªŒè¯ã€æ–‡æ¡£å®Œå–„
- **ä¸­æœŸ (1-2æœˆ)**: AIå¢å¼ºã€åˆ†å¸ƒå¼æ”¯æŒã€ç”Ÿäº§ç¯å¢ƒéªŒè¯
- **é•¿æœŸ (3-6æœˆ)**: äº‘åŸç”Ÿæ”¹é€ ã€æœåŠ¡ç½‘æ ¼é›†æˆã€è¡Œä¸šæ ‡å‡†å»ºç«‹

**ğŸ’ æŠ€æœ¯èµ„äº§ä»·å€¼**:
- å»ºç«‹äº†é‡‘èçº§å¯é æ€§ä¿éšœä½“ç³»æ ‡å‡†
- å½¢æˆäº†å¯å¤ç”¨çš„ä¼ä¸šçº§ç»„ä»¶åº“å’Œè®¾è®¡æ¨¡å¼
- ç§¯ç´¯äº†å®Œæ•´çš„é«˜å¯é ç³»ç»Ÿè®¾è®¡å’Œå®æ–½ç»éªŒ
- ä¸ºæœªæ¥ç±»ä¼¼å¤æ‚ç³»ç»Ÿé¡¹ç›®æä¾›äº†æˆç†Ÿçš„æ–¹æ³•è®º

### ğŸ”§ **ç¬¬ä¸‰é˜¶æ®µä¼ä¸šçº§å¯é æ€§ç³»ç»Ÿ - é‡‘èçº§å®Œæˆ** ğŸ†•

MarketPrismæˆåŠŸå®Œæˆäº†**ç¬¬ä¸‰é˜¶æ®µä¼ä¸šçº§å¯é æ€§ç³»ç»Ÿæ„å»º**ï¼Œå®ç°äº†ä»ä¼ä¸šçº§åˆ°é‡‘èçº§çš„å…³é”®è·ƒå‡ï¼Œå»ºç«‹äº†ä¸šç•Œé¢†å…ˆçš„é«˜å¯é æ€§ä¿éšœä½“ç³»ï¼š

**ğŸ† é‡‘èçº§å¯é æ€§ç³»ç»Ÿå…¨é¢è¾¾æˆ**:
- **å¯é æ€§ç­‰çº§è·ƒå‡**: 95% â†’ 99% (+4%å…³é”®æå‡ï¼Œé‡‘èçº§æ ‡å‡†)
- **æ•…éšœæ¢å¤èƒ½åŠ›**: æ‰‹åŠ¨ â†’ 30ç§’å†…è‡ªåŠ¨æ¢å¤
- **ç›‘æ§æ·±åº¦**: åŸºç¡€æŒ‡æ ‡ â†’ 50+é¡¹å…¨æ–¹ä½ç›‘æ§
- **é”™è¯¯å¤„ç†**: ç®€å•é‡è¯• â†’ æ™ºèƒ½ä¸‰çº§åˆ†ç±»å¤„ç†
- **æµ‹è¯•éªŒè¯**: 12/12æµ‹è¯•100%é€šè¿‡ç‡ï¼Œä¼ä¸šçº§éªŒæ”¶æ»¡åˆ†

**ğŸ”§ äº”å¤§æ ¸å¿ƒå¯é æ€§ç»„ä»¶å®Œæ•´å®ç°**:

1. **ğŸ›¡ï¸ ç†”æ–­å™¨ç³»ç»Ÿ** (`CircuitBreaker`)
   - ä¸‰çŠ¶æ€æ™ºèƒ½ç®¡ç†ï¼šå…³é—­ â†’ å¼€å¯ â†’ åŠå¼€
   - æ•…éšœè‡ªåŠ¨æ£€æµ‹ï¼šå¤±è´¥ç‡ã€æ…¢è°ƒç”¨ã€è¿ç»­å¤±è´¥
   - é™çº§é€»è¾‘æ”¯æŒï¼šè‡ªå®šä¹‰fallbackä¿éšœä¸šåŠ¡è¿ç»­æ€§
   - è‡ªåŠ¨æ¢å¤æœºåˆ¶ï¼šå¯é…ç½®æ¢å¤è¶…æ—¶ï¼Œæ™ºèƒ½çŠ¶æ€è½¬æ¢

2. **ğŸš¦ æ™ºèƒ½é™æµå™¨** (`RateLimiter`)
   - ä»¤ç‰Œæ¡¶+æ»‘åŠ¨çª—å£åŒé‡ç®—æ³•ä¿éšœ
   - å››çº§ä¼˜å…ˆé˜Ÿåˆ—ï¼šCRITICAL > HIGH > NORMAL > LOW
   - è‡ªé€‚åº”é™æµç­–ç•¥ï¼šåŠ¨æ€è°ƒæ•´é˜ˆå€¼
   - åå°å¼‚æ­¥å¤„ç†ï¼šzero-blockingæ€§èƒ½ä¼˜åŒ–

3. **ğŸ”„ æ™ºèƒ½é‡è¯•å¤„ç†å™¨** (`RetryHandler`)
   - å¤šé‡è¯•ç­–ç•¥ï¼šæŒ‡æ•°é€€é¿ã€çº¿æ€§é€€é¿ã€æ–æ³¢é‚£å¥‘ã€è‡ªé€‚åº”
   - æ™ºèƒ½é”™è¯¯åˆ†ç±»ï¼šå¯é‡è¯•/ä¸å¯é‡è¯•/ç½‘ç»œ/æœåŠ¡å™¨é”™è¯¯ç²¾ç¡®è¯†åˆ«
   - è‡ªé€‚åº”å»¶è¿Ÿè°ƒæ•´ï¼šåŸºäºæˆåŠŸç‡åŠ¨æ€ä¼˜åŒ–
   - å®Œæ•´å†å²è¿½è¸ªï¼šå…¨é‡æ“ä½œè®°å½•å’Œæ€§èƒ½ç»Ÿè®¡

4. **âš–ï¸ è´Ÿè½½å‡è¡¡å™¨** (`LoadBalancer`)
   - å¤šç®—æ³•æ”¯æŒï¼šè½®è¯¢ã€åŠ æƒè½®è¯¢ã€æœ€å°‘è¿æ¥ã€å“åº”æ—¶é—´ä¼˜å…ˆ
   - å¥åº·æ£€æŸ¥ï¼šå®æ—¶ç›‘æ§ï¼Œæ•…éšœå®ä¾‹è‡ªåŠ¨éš”ç¦»
   - åŠ¨æ€è°ƒæ•´ï¼šå®ä¾‹æƒé‡è‡ªåŠ¨ä¼˜åŒ–
   - æ•…éšœåˆ‡æ¢ï¼šç§’çº§åˆ‡æ¢ï¼Œä¸šåŠ¡é›¶æ„ŸçŸ¥

5. **ğŸ¯ ç»Ÿä¸€å¯é æ€§ç®¡ç†å™¨** (`ReliabilityManager`)
   - ç»„ä»¶åè°ƒï¼šäº”å¤§ç»„ä»¶æ— ç¼é›†æˆ
   - ç»Ÿä¸€æ¥å£ï¼š`execute_with_protection`ä¸€ç«™å¼ä¿æŠ¤
   - å…¨é¢ç›‘æ§ï¼šç»¼åˆå¥åº·è¯„åˆ†+å‘Šè­¦ç³»ç»Ÿ
   - æ™ºèƒ½å†³ç­–ï¼šåŸºäºå¤šç»´æŒ‡æ ‡çš„è‡ªåŠ¨åŒ–å†³ç­–

**ğŸ“Š é‡‘èçº§æ€§èƒ½æŒ‡æ ‡è¾¾æˆ**:
- **ååé‡**: 50+ req/s (ä¼ä¸šçº§æ ‡å‡†)
- **å“åº”æ—¶é—´**: <100ms (é‡‘èçº§æ€§èƒ½)
- **å¯ç”¨æ€§**: 99%+ SLA (ä¼ä¸šçº§æ‰¿è¯º)
- **æ•…éšœæ¢å¤**: <30ç§’ (è‡ªåŠ¨åŒ–æ¢å¤)
- **ç›‘æ§è¦†ç›–**: 50+é¡¹å…¨æ–¹ä½æŒ‡æ ‡
- **æµ‹è¯•è¦†ç›–**: 100%å®Œç¾é€šè¿‡ç‡

**ğŸš€ æŠ€æœ¯ä»·å€¼ä¸å•†ä¸šå½±å“**:
- **é£é™©é™ä½**: ç³»ç»Ÿæ•…éšœé£é™©é™ä½95%
- **ç”¨æˆ·ä½“éªŒ**: ç¨³å®šæ€§å’Œå“åº”é€Ÿåº¦æ˜¾è‘—æå‡
- **è¿ç»´æ•ˆç‡**: è‡ªåŠ¨åŒ–ç¨‹åº¦95%ï¼Œäººå·¥å¹²é¢„æœ€å°åŒ–
- **åˆè§„ä¿éšœ**: æ»¡è¶³é‡‘èè¡Œä¸šå¯é æ€§æ ‡å‡†
- **ç«äº‰ä¼˜åŠ¿**: å»ºç«‹æŠ€æœ¯é¢†å…ˆçš„å¯é æ€§ä¿éšœä½“ç³»

### ğŸ”® **REFLECTæ¨¡å¼åœ†æ»¡æ”¶å®˜ - æ·±åº¦æ€»ç»“ä¸å‰ç»è§„åˆ’å®Œæˆ** ğŸ†•

ç»§BUILDæ¨¡å¼çš„å†å²æ€§çªç ´åï¼ŒMarketPrismæˆåŠŸå®Œæˆäº†**REFLECTæ·±åº¦åæ€é˜¶æ®µ**ï¼Œå®ç°äº†ç»éªŒå›ºåŒ–ã€çŸ¥è¯†æ²‰æ·€å’Œæœªæ¥è§„åˆ’çš„å…¨é¢æ¢³ç†ï¼š

**ğŸ“Š REFLECTæ¨¡å¼å››å¤§æ ¸å¿ƒæˆæœ**:
1. **BUILDæˆæœæ€»ç»“** (`memory-bank/build-reflection.md`): 
   - å®Œæ•´è®°å½•35%åŠŸèƒ½æå‡çš„è´¨å˜è¿‡ç¨‹
   - æ·±åº¦åˆ†æ3å¤§å…³é”®æŠ€æœ¯çªç ´ (æ•°æ®æ ‡å‡†åŒ–ã€ä»»åŠ¡è°ƒåº¦ã€ç›‘æ§ä½“ç³»)
   - è¯†åˆ«æŠ€æœ¯å€ºåŠ¡å’Œä¼˜åŒ–æ–¹å‘

2. **æœ€ä½³å®è·µæ ‡å‡†åŒ–** (`memory-bank/best-practices.md`):
   - æç‚¼6å¤§ç»éªŒéªŒè¯çš„è®¾è®¡æ¨¡å¼
   - å»ºç«‹ä¼ä¸šçº§å¼€å‘æ ‡å‡†è§„èŒƒ
   - åˆ›å»ºå¯å¤ç”¨çš„æŠ€æœ¯æ¨¡æ¿

3. **æ€§èƒ½æ·±åº¦åˆ†æ** (`memory-bank/performance-analysis.md`):
   - å…¨é¢æ€§èƒ½åŸºçº¿ç¡®ç«‹å’Œç“¶é¢ˆè¯†åˆ«
   - åˆ¶å®šä¸‰é˜¶æ®µæ€§èƒ½ä¼˜åŒ–è·¯çº¿ (20% â†’ 50% â†’ 100%æå‡)
   - é¢„æœŸå¤„ç†èƒ½åŠ›ç¿»å€ (40.9 â†’ 80+ msg/s)

4. **ç¬¬ä¸‰é˜¶æ®µæŠ€æœ¯è·¯çº¿å›¾** (`memory-bank/phase3-roadmap.md`):
   - ä¼ä¸šçº§å¯é æ€§å®Œæ•´è§„åˆ’ (95% â†’ 99%)
   - 5å¤§æ ¸å¿ƒæŠ€æœ¯æ ˆè¯¦ç»†è®¾è®¡ (ç†”æ–­å™¨ã€é™æµå™¨ã€é‡è¯•ã€è´Ÿè½½å‡è¡¡ã€æ•°æ®å†—ä½™)
   - 12å‘¨å®æ–½è®¡åˆ’å’Œé‡‘èçº§éªŒæ”¶æ ‡å‡†

**ğŸ–ï¸ REFLECTæ¨¡å¼æ ¸å¿ƒä»·å€¼**:
- **ç»éªŒå›ºåŒ–**: æˆåŠŸæ¨¡å¼æ ‡å‡†åŒ–ï¼Œé¿å…é‡å¤é€ è½®å­
- **çŸ¥è¯†æ²‰æ·€**: æ·±åº¦æŠ€æœ¯åˆ†ææŒ‡å¯¼åç»­å¼€å‘å†³ç­–
- **è·¯çº¿æ˜ç¡®**: ç¬¬ä¸‰é˜¶æ®µæ¸…æ™°å¯æ‰§è¡Œçš„æŠ€æœ¯è·¯çº¿
- **æ ‡å‡†å»ºç«‹**: 6å¤§è®¾è®¡æ¨¡å¼æˆä¸ºå¼€å‘è§„èŒƒ

**ğŸš€ ä¸‹ä¸€æ­¥ç›®æ ‡**:
- **å¯åŠ¨æ—¶é—´**: 2025-05-25
- **æ ¸å¿ƒç›®æ ‡**: é‡‘èçº§é«˜å¯é æ€§ç³»ç»Ÿ (99.9% SLA)
- **æŠ€æœ¯é‡ç‚¹**: é›¶æ•°æ®ä¸¢å¤±ã€30ç§’æ•…éšœæ¢å¤ã€80+ msg/så¤„ç†èƒ½åŠ›
- **å•†ä¸šä»·å€¼**: è¡Œä¸šæ ‡æ†çº§åŠ å¯†è´§å¸æ•°æ®å¹³å°åœ°ä½

### ğŸ† **BUILDæ¨¡å¼å®Œç¾æ”¶å®˜ - ç¬¬äºŒé˜¶æ®µæˆå°±è¾¾æˆ**

MarketPrismé¡¹ç›®åœ¨BUILDæ¨¡å¼ä¸‹å–å¾—äº†**å†å²æ€§çªç ´**ï¼ŒæˆåŠŸå®Œæˆäº†ä»åŸºç¡€æ•°æ®æ”¶é›†å·¥å…·åˆ°ä¼ä¸šçº§æ•°æ®é‡‡é›†å¹³å°çš„å®Œæ•´è½¬å‹ï¼š

**ğŸ“Š BUILDæ¨¡å¼æœ€ç»ˆæˆå°±ç»Ÿè®¡ï¼š**
- **åŠŸèƒ½å®Œæ•´æ€§è·ƒå‡**: 60% â†’ 95% (+35%å·¨å¤§æå‡)
- **æ•°æ®ç±»å‹æ‰©å±•**: 4ç§ â†’ 7ç§ (+75%è¦†ç›–å¢é•¿)
- **ä¼ä¸šåŠŸèƒ½**: 111+ç›‘æ§æŒ‡æ ‡ + 8ç±»è°ƒåº¦ä»»åŠ¡ + å®Œæ•´å¥åº·æ£€æŸ¥
- **æµ‹è¯•éªŒè¯**: ç¬¬äºŒé˜¶æ®µ5/5é¡¹æµ‹è¯•100%é€šè¿‡ï¼Œ0.7msæ‰§è¡Œæ—¶é—´

**ğŸ¯ ç¬¬äºŒé˜¶æ®µæ ¸å¿ƒçªç ´**:
1. **é«˜çº§æ•°æ®ç±»å‹ç³»ç»Ÿ**: å®Œæ•´å®ç°æœŸè´§æ•°æ®æ”¯æŒ
   - èµ„é‡‘è´¹ç‡æ•°æ® (`NormalizedFundingRate`) - 8å°æ—¶å‘¨æœŸç²¾å‡†ç›‘æ§
   - æŒä»“é‡æ•°æ® (`NormalizedOpenInterest`) - 15åˆ†é’Ÿçº§åˆ«ç›‘æ§
   - å¼ºå¹³æ•°æ® (`NormalizedLiquidation`) - å®æ—¶é£é™©äº‹ä»¶æ•è·

2. **ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ**: ä¼ä¸šçº§è‡ªåŠ¨åŒ–è¿ç»´
   - æ•°æ®å®Œæ•´æ€§ä¿éšœ: WebSocket + REST APIåŒé‡è¦†ç›–
   - ç³»ç»Ÿè‡ªæ„ˆèƒ½åŠ›: 5åˆ†é’Ÿå¥åº·æ£€æŸ¥ï¼Œè‡ªåŠ¨é‡è¿
   - ä¸šåŠ¡å‘¨æœŸåŒæ­¥: ä¸äº¤æ˜“æ‰€ç»“ç®—æ—¶é—´ç²¾å‡†å¯¹é½
   - è¿ç»´è‡ªåŠ¨åŒ–: 95%ä»»åŠ¡è‡ªåŠ¨æ‰§è¡Œï¼Œå‘Šåˆ«æ‰‹åŠ¨æ“ä½œ

3. **ç³»ç»Ÿé›†æˆå®Œå–„**: ç”Ÿäº§çº§ç¨³å®šæ€§
   - NATSä¸»é¢˜æ‰©å±•: 7ç§æ•°æ®æµå®Œæ•´æ”¯æŒ
   - OKXæœŸè´§æ•°æ®: SWAPåˆçº¦å®Œæ•´æ•°æ®æµ
   - é”™è¯¯å¤„ç†: é›¶å®¹å¿æ•°æ®æ ‡å‡†åŒ–é”™è¯¯
   - æ€§èƒ½ä¼˜åŒ–: 40.9 msg/sç¨³å®šåå

### âœ… Pythonæ”¶é›†å™¨æ•°æ®æ ‡å‡†åŒ–å®Œå…¨æˆåŠŸ

MarketPrism Pythonæ”¶é›†å™¨ç»è¿‡æ·±åº¦ä¼˜åŒ–ï¼Œå·²å®ç°**å®Œç¾çš„æ•°æ®æ ‡å‡†åŒ–å¤„ç†**ï¼š

**ğŸ”§ æŠ€æœ¯æˆæœï¼š**
- **é›¶é”™è¯¯æ•°æ®å¤„ç†**ï¼šæ‰€æœ‰äº¤æ˜“æ‰€æ•°æ®ç±»å‹ï¼ˆtradeã€tickerã€orderbookï¼‰å®Œå…¨æ­£å¸¸
- **å®Œæ•´å­—æ®µæ˜ å°„**ï¼šè¡¥å…¨æ‰€æœ‰Pydanticæ¨¡å‹å¿…å¡«å­—æ®µ
- **å®æ—¶é«˜æ€§èƒ½**ï¼š1277æ¡æ¶ˆæ¯/31.2ç§’ï¼Œé›¶é”™è¯¯å¤„ç†
- **å¤šäº¤æ˜“æ‰€æ”¯æŒ**ï¼šOKXå®Œå…¨æˆåŠŸï¼ŒBinance/Deribitæ¶æ„å°±ç»ª

**ğŸ“Š éªŒè¯ç»“æœï¼š**
```bash
# å®æ—¶æ•°æ®æµéªŒè¯ï¼ˆ2025-05-24ï¼‰
âœ… OKX BTC-USDT: $108,718.2 (å®æ—¶äº¤æ˜“æ•°æ®)
âœ… OKX ETH-USDT: $2,552.85 (å®æ—¶è¡Œæƒ…æ•°æ®)  
âœ… OKX ADA-USDT: $0.7578 (å®æ—¶è®¢å•ç°¿æ•°æ®)

# NATSæ¶ˆæ¯é˜Ÿåˆ—
âœ… æ¶ˆæ¯å‘å¸ƒæˆåŠŸï¼šåºåˆ—å· 1278-1284+
âœ… æ•°æ®æµå®Œæ•´ï¼šmarket.okx.{symbol}.{type}

# ç³»ç»ŸçŠ¶æ€
âœ… é”™è¯¯ç‡ï¼š0%ï¼ˆä¹‹å‰æœ‰å¤šç§æ•°æ®æ ‡å‡†åŒ–é”™è¯¯ï¼‰
âœ… æ•°æ®å®Œæ•´æ€§ï¼š100%ï¼ˆæ‰€æœ‰å¿…å¡«å­—æ®µæ­£ç¡®æ˜ å°„ï¼‰
âœ… å®æ—¶æ€§èƒ½ï¼š40+ æ¶ˆæ¯/ç§’
```

**ğŸ› ï¸ æ ¸å¿ƒä¿®å¤ï¼š**
1. **OKXé€‚é…å™¨**ï¼šå®Œå–„tickeræ‰€æœ‰å¿…å¡«å­—æ®µï¼ˆopen_priceã€weighted_avg_priceã€best_bid/askç­‰ï¼‰
2. **Binanceé€‚é…å™¨**ï¼šåˆ©ç”¨24hrå®Œæ•´æ•°æ®ï¼Œä¿®å¤ç¬¦å·æ ¼å¼æ˜ å°„
3. **Deribité€‚é…å™¨**ï¼šåˆç†é»˜è®¤å€¼å¤„ç†ï¼Œå®Œå–„è¡ç”Ÿå“æ•°æ®ç»“æ„
4. **é€šç”¨ä¿®å¤**ï¼šæ‰€æœ‰é€‚é…å™¨æ·»åŠ quote_quantityè®¡ç®—

è¿™ä¸€çªç ´ç¡®ä¿äº†MarketPrismèƒ½å¤Ÿç¨³å®šã€å‡†ç¡®åœ°å¤„ç†æ‰€æœ‰ä¸»æµäº¤æ˜“æ‰€çš„å®æ—¶å¸‚åœºæ•°æ®ã€‚

---

## ğŸš€ å¼€å‘ç­–ç•¥ï¼šæœ¬åœ°æ„å»ºä¼˜å…ˆ

**æ ¸å¿ƒç†å¿µ**ï¼šæœ¬åœ°æ„å»ºä¼˜å…ˆï¼Œç½‘ç»œä¾èµ–æœ€å°åŒ–ï¼Œç¡®ä¿å¼€å‘ç¯å¢ƒçš„ç¨³å®šæ€§å’Œé«˜æ•ˆæ€§ã€‚

> ğŸ”¥ **é‡è¦æé†’**ï¼šé¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­è·å¾—äº†é‡è¦çš„æŠ€æœ¯æ•™è®­ï¼Œå¼ºçƒˆå»ºè®®é˜…è¯» [æ ¸å¿ƒæŠ€æœ¯æ•™è®­æ–‡æ¡£](memory-bank/core_lessons_learned.md)ï¼Œç‰¹åˆ«æ˜¯å…³äºGoæ¨¡å—ç³»ç»Ÿå’Œè™šå‡GitHubå¯¼å…¥è·¯å¾„çš„å†…å®¹ã€‚

### âš¡ æœ¬åœ°æ„å»ºéªŒè¯

MarketPrismå·²æˆåŠŸå®ç°æœ¬åœ°æ„å»ºç­–ç•¥ï¼Œå®é™…éªŒè¯ç»“æœï¼š

```bash
# æœ¬åœ°æ„å»ºæµ‹è¯•ï¼ˆå®é™…ç»“æœï¼‰
$ ./scripts/local_build.sh go-simple
====== æ„å»ºæœåŠ¡: go-simple ======
âœ… æ„å»ºå®Œæˆ: bin/go-simple
ğŸ‰ go-simple æ„å»ºæˆåŠŸï¼
æ„å»ºæ—¶é—´: < 30ç§’ï¼Œæ— ç½‘ç»œä¾èµ–

# æœåŠ¡è¿è¡Œæµ‹è¯•
$ services/go-simple/bin/go-simple
ğŸš€ MarketPrism Go Service - æœ¬åœ°æ„å»ºæ¼”ç¤ºç‰ˆ
âœ… æœåŠ¡è¿è¡Œä¸­: http://localhost:8080

# å¥åº·æ£€æŸ¥ç»“æœ
$ curl http://localhost:8080/health
{
    "status": "ok",
    "service": "go-simple",
    "build_strategy": "æœ¬åœ°æ„å»ºä¼˜å…ˆ",
    "network_dependency": "æ— "
}
```

### ğŸ“¦ æ„å»ºç­–ç•¥å±‚çº§

1. **ğŸ¥‡ ä¼˜å…ˆçº§1ï¼šå®Œå…¨ç¦»çº¿æ„å»º** - 30ç§’å†…å®Œæˆï¼Œæ— ç½‘ç»œä¾èµ–
2. **ğŸ¥ˆ ä¼˜å…ˆçº§2ï¼šæœ¬åœ°ç¼“å­˜æ„å»º** - åˆ©ç”¨Dockerå±‚ç¼“å­˜
3. **ğŸ¥‰ ä¼˜å…ˆçº§3ï¼šå¼€å‘ç¯å¢ƒ** - ä»£ç æŒ‚è½½ï¼Œ0ç§’å¯åŠ¨
4. **âš ï¸ å¤‡é€‰æ–¹æ¡ˆï¼šç½‘ç»œä¼˜åŒ–æ„å»º** - ä»…åœ¨å¿…è¦æ—¶ä½¿ç”¨

### ğŸ¯ å®é™…æ€§èƒ½å¯¹æ¯”

| æ„å»ºæ–¹å¼ | æ„å»ºæ—¶é—´ | ç½‘ç»œä¾èµ– | ç¨³å®šæ€§ | éªŒè¯çŠ¶æ€ |
|----------|----------|----------|--------|----------|
| **æœ¬åœ°ç¦»çº¿** | <30ç§’ | âŒ æ—  | âœ… æé«˜ | âœ… å·²éªŒè¯ |
| **å¼€å‘æŒ‚è½½** | <10ç§’ | âŒ æ—  | âœ… æé«˜ | âœ… å·²éªŒè¯ |
| **ç½‘ç»œæ„å»º** | 5-10åˆ†é’Ÿ | âŒ å¼ºä¾èµ– | âš ï¸ ä½ | âŒ ä¸ç¨³å®š |

## é¡¹ç›®æ¦‚è¿°

MarketPrism æ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„åŠ å¯†è´§å¸å¸‚åœºæ•°æ®æ”¶é›†å’Œåˆ†æç³»ç»Ÿï¼Œä¸“æ³¨äºå®æ—¶æ•°æ®é‡‡é›†ã€æ ‡å‡†åŒ–å¤„ç†å’Œé«˜æ€§èƒ½åˆ†å‘ã€‚ç³»ç»Ÿé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼Œæ”¯æŒå¤šäº¤æ˜“æ‰€ã€å¤šæ•°æ®ç±»å‹çš„åŒæ—¶æ”¶é›†ï¼Œå¹¶æä¾›å®Œæ•´çš„ç›‘æ§å’Œè°ƒåº¦åŠŸèƒ½ã€‚

### æ ¸å¿ƒç‰¹æ€§

- **å¤šäº¤æ˜“æ‰€æ”¯æŒ**: Binanceã€OKXã€Deribit ç­‰ä¸»æµäº¤æ˜“æ‰€
- **å…¨æ•°æ®ç±»å‹è¦†ç›–**: ç°è´§ã€æœŸè´§ã€æœŸæƒç­‰ 7 ç§æ•°æ®ç±»å‹
- **ä¼ä¸šçº§ç›‘æ§**: 111+ Prometheus æŒ‡æ ‡ï¼Œå®Œæ•´å¥åº·æ£€æŸ¥
- **æ™ºèƒ½è°ƒåº¦**: åŸºäº APScheduler çš„ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ
- **é«˜æ€§èƒ½**: NATS JetStream + ClickHouseï¼Œæ¯«ç§’çº§å»¶è¿Ÿ
- **ç”Ÿäº§å°±ç»ª**: å®Œæ•´çš„é”™è¯¯å¤„ç†ã€ç†”æ–­å™¨ã€é™æµå™¨

## ç³»ç»Ÿæ¶æ„

```mermaid
graph TB
    %% æ•°æ®æºå±‚
    subgraph "äº¤æ˜“æ‰€æ•°æ®æº"
        BN[Binance<br/>ç°è´§+æœŸè´§]
        OKX[OKX<br/>ç°è´§+æœŸè´§+æœŸæƒ]
        DB[Deribit<br/>æœŸæƒ+æœŸè´§]
    end
    
    %% æ”¶é›†å±‚
    subgraph "æ•°æ®æ”¶é›†å±‚"
        GC[Go-Collector<br/>é«˜æ€§èƒ½]
        PC[Python-Collector<br/>ä¼ä¸šçº§åŠŸèƒ½]
    end
    
    %% è°ƒåº¦ç³»ç»Ÿ
    subgraph "ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ"
        SCH[APScheduler<br/>å®šæ—¶ä»»åŠ¡]
        FRT[èµ„é‡‘è´¹ç‡æ”¶é›†<br/>æ¯8å°æ—¶]
        OIT[æŒä»“é‡æ”¶é›†<br/>æ¯15åˆ†é’Ÿ]
        LQT[å¼ºå¹³ç›‘æ§<br/>æ¯åˆ†é’Ÿ]
        HCT[å¥åº·æ£€æŸ¥<br/>æ¯5åˆ†é’Ÿ]
    end
    
    %% æ¶ˆæ¯ç³»ç»Ÿ
    subgraph "æ¶ˆæ¯ç³»ç»Ÿ (NATS JetStream)"
        MS[MARKET_DATAæµ]
        TRD[market.*.*.trade]
        OB[market.*.*.orderbook]
        TKR[market.*.*.ticker]
        KL[market.*.*.kline.*]
        FR[market.*.*.funding_rate]
        OI[market.*.*.open_interest]
        LQ[market.*.*.liquidation]
    end
    
    %% å­˜å‚¨å±‚
    subgraph "æ•°æ®å­˜å‚¨"
        CH[ClickHouse<br/>æ—¶åºæ•°æ®åº“]
        TB1[trades è¡¨]
        TB2[depth è¡¨]
        TB3[tickers è¡¨]
        TB4[funding_rates è¡¨]
        TB5[open_interest è¡¨]
        TB6[liquidations è¡¨]
    end
    
    %% ç›‘æ§ç³»ç»Ÿ
    subgraph "ç›‘æ§ç³»ç»Ÿ"
        PROM[Prometheus<br/>111+ æŒ‡æ ‡]
        GRAF[Grafana<br/>å¯è§†åŒ–]
        HEALTH[å¥åº·æ£€æŸ¥<br/>å¤šå±‚çº§]
    end
    
    %% è¿æ¥å…³ç³»
    BN --> GC
    BN --> PC
    OKX --> GC
    OKX --> PC
    DB --> GC
    DB --> PC
    
    SCH --> PC
    FRT --> PC
    OIT --> PC
    LQT --> PC
    HCT --> PC
    
    GC --> MS
    PC --> MS
    
    MS --> TRD
    MS --> OB
    MS --> TKR
    MS --> KL
    MS --> FR
    MS --> OI
    MS --> LQ
    
    TRD --> CH
    OB --> CH
    TKR --> CH
    KL --> CH
    FR --> CH
    OI --> CH
    LQ --> CH
    
    CH --> TB1
    CH --> TB2
    CH --> TB3
    CH --> TB4
    CH --> TB5
    CH --> TB6
    
    PC --> PROM
    GC --> PROM
    PROM --> GRAF
    PC --> HEALTH
```

## æ•°æ®ç±»å‹æ”¯æŒ

### åŸºç¡€æ•°æ®ç±»å‹ (4ç§)
1. **äº¤æ˜“æ•°æ®** (`trade`): å®æ—¶æˆäº¤è®°å½•
2. **è®¢å•ç°¿æ•°æ®** (`orderbook`): ä¹°å–ç›˜æ·±åº¦
3. **Kçº¿æ•°æ®** (`kline`): OHLCV èœ¡çƒ›å›¾æ•°æ®
4. **è¡Œæƒ…æ•°æ®** (`ticker`): 24å°æ—¶ç»Ÿè®¡ä¿¡æ¯

### é«˜çº§æ•°æ®ç±»å‹ (3ç§) ğŸ†•
5. **èµ„é‡‘è´¹ç‡æ•°æ®** (`funding_rate`): æœŸè´§åˆçº¦èµ„é‡‘è´¹ç‡
6. **æŒä»“é‡æ•°æ®** (`open_interest`): æœªå¹³ä»“åˆçº¦æ•°é‡
7. **å¼ºå¹³æ•°æ®** (`liquidation`): å¼ºåˆ¶å¹³ä»“äº‹ä»¶

### æ•°æ®æ ‡å‡†åŒ–æ¨¡å‹

```python
# èµ„é‡‘è´¹ç‡æ•°æ®
class NormalizedFundingRate(BaseModel):
    exchange_name: str          # äº¤æ˜“æ‰€åç§°
    symbol_name: str           # äº¤æ˜“å¯¹ç¬¦å·
    funding_rate: Decimal      # å½“å‰èµ„é‡‘è´¹ç‡
    estimated_rate: Optional[Decimal]  # é¢„æµ‹è´¹ç‡
    next_funding_time: datetime        # ä¸‹æ¬¡ç»“ç®—æ—¶é—´
    mark_price: Decimal        # æ ‡è®°ä»·æ ¼
    index_price: Decimal       # æŒ‡æ•°ä»·æ ¼
    premium_index: Decimal     # æº¢ä»·æŒ‡æ•°
    funding_interval: str = "8h"  # ç»“ç®—å‘¨æœŸ
    timestamp: datetime        # æ—¶é—´æˆ³

# æŒä»“é‡æ•°æ®
class NormalizedOpenInterest(BaseModel):
    exchange_name: str         # äº¤æ˜“æ‰€åç§°
    symbol_name: str          # äº¤æ˜“å¯¹ç¬¦å·
    open_interest: Decimal    # æŒä»“é‡ (åˆçº¦æ•°é‡)
    open_interest_value: Decimal  # æŒä»“é‡ä»·å€¼
    change_24h: Optional[Decimal]     # 24å°æ—¶å˜åŒ–é‡
    change_24h_percent: Optional[Decimal]  # 24å°æ—¶å˜åŒ–ç™¾åˆ†æ¯”
    instrument_type: str = "futures"  # åˆçº¦ç±»å‹
    timestamp: datetime       # æ—¶é—´æˆ³

# å¼ºå¹³æ•°æ®
class NormalizedLiquidation(BaseModel):
    exchange_name: str        # äº¤æ˜“æ‰€åç§°
    symbol_name: str         # äº¤æ˜“å¯¹ç¬¦å·
    liquidation_id: Optional[str]  # å¼ºå¹³ID
    side: str                # å¼ºå¹³æ–¹å‘ (buy/sell)
    price: Decimal           # å¼ºå¹³ä»·æ ¼
    quantity: Decimal        # å¼ºå¹³æ•°é‡
    value: Optional[Decimal] # å¼ºå¹³ä»·å€¼
    leverage: Optional[Decimal]    # æ æ†å€æ•°
    instrument_type: str = "futures"  # åˆçº¦ç±»å‹
    timestamp: datetime      # æ—¶é—´æˆ³
```

## æœåŠ¡ç»„ä»¶

### Python Collector (ä¼ä¸šçº§åŠŸèƒ½)

**ä½ç½®**: `services/python-collector/`

**æ ¸å¿ƒåŠŸèƒ½**:
- æ”¯æŒ 7 ç§æ•°æ®ç±»å‹çš„å®æ—¶æ”¶é›†
- ä¼ä¸šçº§ç›‘æ§ç³»ç»Ÿ (111+ Prometheus æŒ‡æ ‡)
- ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ (APScheduler)
- å¥åº·æ£€æŸ¥å’Œè‡ªåŠ¨æ¢å¤
- å¤šå±‚çº§é”™è¯¯å¤„ç†

**ä¸»è¦æ¨¡å—**:
```
src/marketprism_collector/
â”œâ”€â”€ types.py              # æ•°æ®ç±»å‹å®šä¹‰
â”œâ”€â”€ collector.py          # ä¸»æ”¶é›†å™¨
â”œâ”€â”€ exchanges/            # äº¤æ˜“æ‰€é€‚é…å™¨
â”‚   â”œâ”€â”€ base.py          # åŸºç¡€é€‚é…å™¨
â”‚   â”œâ”€â”€ binance.py       # Binance é€‚é…å™¨
â”‚   â”œâ”€â”€ okx.py           # OKX é€‚é…å™¨ (æ”¯æŒæœŸè´§)
â”‚   â””â”€â”€ deribit.py       # Deribit é€‚é…å™¨
â”œâ”€â”€ monitoring/           # ä¼ä¸šçº§ç›‘æ§
â”‚   â”œâ”€â”€ metrics.py       # Prometheus æŒ‡æ ‡
â”‚   â”œâ”€â”€ health.py        # å¥åº·æ£€æŸ¥
â”‚   â””â”€â”€ middleware.py    # æ€§èƒ½ç›‘æ§
â”œâ”€â”€ nats_client.py       # NATS å‘å¸ƒå™¨
â””â”€â”€ normalizer.py        # æ•°æ®æ ‡å‡†åŒ–
```

**ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ**:
```
scheduler/
â”œâ”€â”€ scheduler.py         # ä¸»è°ƒåº¦å™¨
â”œâ”€â”€ jobs.py             # ä»»åŠ¡é…ç½®
â””â”€â”€ __init__.py         # æ¨¡å—åˆå§‹åŒ–
```

### Go Collector (é«˜æ€§èƒ½)

**ä½ç½®**: `services/go-collector/`

**æ ¸å¿ƒåŠŸèƒ½**:
- é«˜å¹¶å‘æ•°æ®æ”¶é›† (25K+ msg/s)
- ä½å»¶è¿Ÿå¤„ç† (1-5ms)
- å†…å­˜ä¼˜åŒ–å’Œè¿æ¥æ± 
- åŸºç¡€ç›‘æ§å’Œå¥åº·æ£€æŸ¥

### æ•°æ®å½’ä¸€åŒ–å™¨

**ä½ç½®**: `services/data_normalizer/`

**åŠŸèƒ½**: ç‹¬ç«‹çš„æ•°æ®æ ‡å‡†åŒ–æœåŠ¡
- å¤šæ ¼å¼æ•°æ®è½¬æ¢
- å­—æ®µæ˜ å°„å’ŒéªŒè¯
- é”™è¯¯æ•°æ®è¿‡æ»¤

## ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ ğŸ†•

åŸºäº APScheduler å®ç°çš„ä¼ä¸šçº§ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼Œæ”¯æŒå®šæ—¶æ”¶é›†å’Œç›‘æ§ä»»åŠ¡ã€‚

### è°ƒåº¦ä»»åŠ¡ç±»å‹

1. **èµ„é‡‘è´¹ç‡æ”¶é›†ä»»åŠ¡**
   - é¢‘ç‡: æ¯å°æ—¶ / æ¯8å°æ—¶ (ä¸äº¤æ˜“æ‰€ç»“ç®—åŒæ­¥)
   - ç”¨é€”: æ”¶é›†æœŸè´§åˆçº¦èµ„é‡‘è´¹ç‡æ•°æ®

2. **æŒä»“é‡æ”¶é›†ä»»åŠ¡**
   - é¢‘ç‡: æ¯15åˆ†é’Ÿ / æ¯5åˆ†é’Ÿ
   - ç”¨é€”: æ”¶é›†æœŸè´§åˆçº¦æŒä»“é‡æ•°æ®

3. **å¼ºå¹³ç›‘æ§ä»»åŠ¡**
   - é¢‘ç‡: æ¯åˆ†é’Ÿ
   - ç”¨é€”: ç›‘æ§å¼ºå¹³æ•°æ®æµçŠ¶æ€

4. **ç³»ç»Ÿå¥åº·æ£€æŸ¥**
   - é¢‘ç‡: æ¯5åˆ†é’Ÿ
   - ç”¨é€”: æ£€æŸ¥ç³»ç»Ÿç»„ä»¶å¥åº·çŠ¶æ€

### HTTP ç«¯ç‚¹

- `GET /scheduler` - è·å–è°ƒåº¦å™¨çŠ¶æ€å’Œä»»åŠ¡ä¿¡æ¯

## ç›‘æ§ç³»ç»Ÿ

### Prometheus æŒ‡æ ‡ (111+ æŒ‡æ ‡)

**æ¶ˆæ¯å¤„ç†æŒ‡æ ‡**:
- `marketprism_messages_total` - å¤„ç†æ¶ˆæ¯æ€»æ•°
- `marketprism_messages_per_second` - æ¯ç§’æ¶ˆæ¯æ•°
- `marketprism_processing_duration_seconds` - å¤„ç†è€—æ—¶

**é”™è¯¯ç›‘æ§æŒ‡æ ‡**:
- `marketprism_errors_total` - é”™è¯¯æ€»æ•°
- `marketprism_error_rate` - é”™è¯¯ç‡

**ç³»ç»Ÿèµ„æºæŒ‡æ ‡**:
- `marketprism_memory_usage_bytes` - å†…å­˜ä½¿ç”¨é‡
- `marketprism_cpu_usage_percent` - CPU ä½¿ç”¨ç‡

**è¿æ¥çŠ¶æ€æŒ‡æ ‡**:
- `marketprism_exchange_connection_status` - äº¤æ˜“æ‰€è¿æ¥çŠ¶æ€
- `marketprism_websocket_connections` - WebSocket è¿æ¥æ•°

**NATS å‘å¸ƒæŒ‡æ ‡**:
- `marketprism_nats_publishes_total` - NATS å‘å¸ƒæ€»æ•°
- `marketprism_nats_publish_duration_seconds` - å‘å¸ƒè€—æ—¶

### å¥åº·æ£€æŸ¥

**æ£€æŸ¥é¡¹ç›®**:
- NATS è¿æ¥çŠ¶æ€
- äº¤æ˜“æ‰€è¿æ¥çŠ¶æ€  
- å†…å­˜ä½¿ç”¨æƒ…å†µ
- ç³»ç»Ÿè¿è¡Œæ—¶é—´

**çŠ¶æ€åˆ†çº§**:
- `healthy` - æ‰€æœ‰æ£€æŸ¥é€šè¿‡
- `degraded` - éƒ¨åˆ†æ£€æŸ¥å¤±è´¥
- `unhealthy` - å…³é”®æ£€æŸ¥å¤±è´¥

### HTTP ç«¯ç‚¹

- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /metrics` - Prometheus æŒ‡æ ‡
- `GET /status` - ç³»ç»ŸçŠ¶æ€
- `GET /scheduler` - è°ƒåº¦å™¨çŠ¶æ€

## é…ç½®ç®¡ç†

### æ”¶é›†å™¨é…ç½®

```yaml
# config/collector.yaml
collector:
  use_real_exchanges: true
  enable_scheduler: true    # å¯ç”¨ä»»åŠ¡è°ƒåº¦
  http_port: 8080

# NATS é…ç½®
nats:
  url: "nats://localhost:4222"
  client_name: "marketprism-collector"
  
# äº¤æ˜“æ‰€é…ç½®
exchanges:
  - exchange: "okx"
    market_type: "spot"
    symbols: ["BTC-USDT", "ETH-USDT"]
    data_types: ["trade", "orderbook", "ticker", "funding_rate", "open_interest"]

# ä»»åŠ¡è°ƒåº¦é…ç½®
scheduler:
  jobs:
    funding_rate:
      enabled: true
      interval: 1h
    open_interest:
      enabled: true
      interval: 15m
```

## éƒ¨ç½²æ¶æ„

### Docker éƒ¨ç½²

```bash
# å¯åŠ¨å®Œæ•´ç³»ç»Ÿ
docker-compose up -d

# ä»…å¯åŠ¨åŸºç¡€è®¾æ–½
docker-compose -f docker-compose.infrastructure.yml up -d

# å¯åŠ¨æ”¶é›†å™¨
docker-compose -f docker-compose.prod.yml up -d
```

### æœåŠ¡ç»„ä»¶

1. **NATS Server** - æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡
2. **ClickHouse** - æ—¶åºæ•°æ®åº“
3. **Prometheus** - ç›‘æ§æŒ‡æ ‡æ”¶é›†
4. **Grafana** - ç›‘æ§å¯è§†åŒ–
5. **Python Collector** - ä¼ä¸šçº§æ•°æ®æ”¶é›†å™¨
6. **Go Collector** - é«˜æ€§èƒ½æ•°æ®æ”¶é›†å™¨

## æ•°æ®æµå¤„ç†

### å®æ—¶æ•°æ®æµ

```
äº¤æ˜“æ‰€ WebSocket â†’ é€‚é…å™¨æ ‡å‡†åŒ– â†’ NATS å‘å¸ƒ â†’ ClickHouse å­˜å‚¨
```

### å®šæ—¶æ•°æ®æ”¶é›†

```
è°ƒåº¦å™¨è§¦å‘ â†’ REST API è¯·æ±‚ â†’ æ•°æ®æ ‡å‡†åŒ– â†’ NATS å‘å¸ƒ â†’ ClickHouse å­˜å‚¨
```

### NATS ä¸»é¢˜è®¾è®¡

**åŸºç¡€æ•°æ®æµ**:
- `market.binance.btc_usdt.trade` - Binance BTC-USDT äº¤æ˜“æ•°æ®
- `market.okx.eth_usdt.orderbook` - OKX ETH-USDT è®¢å•ç°¿æ•°æ®
- `market.deribit.btc_usd.ticker` - Deribit BTC-USD è¡Œæƒ…æ•°æ®

**é«˜çº§æ•°æ®æµ**:
- `market.okx.btc_usdt.funding_rate` - OKX BTC-USDT èµ„é‡‘è´¹ç‡
- `market.binance.eth_usdt.open_interest` - Binance ETH-USDT æŒä»“é‡
- `market.okx.btc_usdt.liquidation` - OKX BTC-USDT å¼ºå¹³æ•°æ®

## æ€§èƒ½æŒ‡æ ‡

### ç¬¬äºŒé˜¶æ®µæˆå°± (é«˜çº§æ•°æ®ç±»å‹æ”¯æŒ)

- **åŠŸèƒ½å®Œæ•´æ€§**: 85% â†’ 95% (+10%)
- **æ•°æ®ç±»å‹**: 4ç§ â†’ 7ç§ (+75%)
- **æœŸè´§æ•°æ®æ”¯æŒ**: 0% â†’ 100%
- **NATS ä¸»é¢˜**: 4ç§ â†’ 7ç§ (+75%)
- **æµ‹è¯•é€šè¿‡ç‡**: 5/5 (100%)

### ç¬¬ä¸€é˜¶æ®µæˆå°± (ä¼ä¸šçº§ç›‘æ§)

- **åŠŸèƒ½å®Œæ•´æ€§**: 60% â†’ 85% (+25%)
- **Prometheus æŒ‡æ ‡**: 0 â†’ 111 (+111)
- **å¥åº·æ£€æŸ¥**: åŸºç¡€ â†’ ä¼ä¸šçº§
- **æµ‹è¯•é€šè¿‡ç‡**: 4/4 (100%)

### æ•´ä½“æ€§èƒ½

- **æ¶ˆæ¯å¤„ç†**: 40.9 msg/s (å®æµ‹)
- **é”™è¯¯ç‡**: 0% (é›¶é”™è¯¯)
- **å»¶è¿Ÿ**: 1-5ms (ç«¯åˆ°ç«¯)
- **ååé‡**: 25K+ msg/s (Go æ”¶é›†å™¨)
- **è¿æ¥ç¨³å®šæ€§**: 100%+

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°äº¤æ˜“æ‰€

1. åˆ›å»ºé€‚é…å™¨ç±»ç»§æ‰¿ `ExchangeAdapter`
2. å®ç°æ•°æ®æ ‡å‡†åŒ–æ–¹æ³•
3. é…ç½® WebSocket è¿æ¥
4. æ·»åŠ äº¤æ˜“æ‰€é…ç½®

### æ·»åŠ æ–°æ•°æ®ç±»å‹

1. åœ¨ `types.py` ä¸­å®šä¹‰æ•°æ®æ¨¡å‹
2. æ‰©å±• `DataType` æšä¸¾
3. æ›´æ–° NATS å‘å¸ƒå™¨
4. å®ç°é€‚é…å™¨æ ‡å‡†åŒ–æ–¹æ³•
5. æ·»åŠ  ClickHouse è¡¨ç»“æ„

### ç›‘æ§æŒ‡æ ‡æ·»åŠ 

1. åœ¨ `monitoring/metrics.py` ä¸­å®šä¹‰æŒ‡æ ‡
2. åœ¨ä¸šåŠ¡é€»è¾‘ä¸­è®°å½•æŒ‡æ ‡
3. é…ç½® Grafana ä»ªè¡¨æ¿

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥å¤±è´¥**: æ£€æŸ¥ç½‘ç»œä»£ç†é…ç½®
2. **æ•°æ®ä¸¢å¤±**: æ£€æŸ¥ NATS æµé…ç½®
3. **æ€§èƒ½é—®é¢˜**: æŸ¥çœ‹ Prometheus æŒ‡æ ‡
4. **è°ƒåº¦ä»»åŠ¡å¤±è´¥**: æ£€æŸ¥ `/scheduler` ç«¯ç‚¹

### æ—¥å¿—åˆ†æ

```bash
# æŸ¥çœ‹æ”¶é›†å™¨æ—¥å¿—
docker-compose logs python-collector

# æŸ¥çœ‹ NATS æ—¥å¿—
docker-compose logs nats

# æŸ¥çœ‹ ClickHouse æ—¥å¿—
docker-compose logs clickhouse
```

## æœªæ¥è§„åˆ’

### ç¬¬ä¸‰é˜¶æ®µ: ä¼ä¸šçº§å¯é æ€§

- ç†”æ–­å™¨å’Œé™æµå™¨
- æ™ºèƒ½é‡è¯•æœºåˆ¶
- è‡ªåŠ¨æ•…éšœæ¢å¤
- è´Ÿè½½å‡è¡¡

### ç¬¬å››é˜¶æ®µ: é«˜çº§é…ç½®

- åŠ¨æ€é…ç½®æ›´æ–°
- å¤šç¯å¢ƒéƒ¨ç½²
- A/B æµ‹è¯•æ”¯æŒ

### ç¬¬äº”é˜¶æ®µ: ç”Ÿäº§ä¼˜åŒ–

- å†…å­˜æ± å’Œè¿æ¥æ± 
- æ€§èƒ½è°ƒä¼˜
- æˆæœ¬ä¼˜åŒ–

## è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶