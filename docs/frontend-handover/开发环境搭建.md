# MarketPrism å¼€å‘ç¯å¢ƒæ­å»ºæŒ‡å—

## ğŸ“‹ æ¦‚è¿°
æœ¬æ–‡æ¡£æŒ‡å¯¼å‰ç«¯å›¢é˜Ÿæ­å»ºMarketPrismé¡¹ç›®çš„å¼€å‘ç¯å¢ƒï¼ŒåŒ…å«åç«¯APIæœåŠ¡ã€æ•°æ®åº“ã€ç¬¬ä¸‰æ–¹æœåŠ¡ç­‰å®Œæ•´å¼€å‘ç¯å¢ƒã€‚

## ğŸ› ï¸ ç³»ç»Ÿè¦æ±‚

### ç¡¬ä»¶è¦æ±‚
- **CPU**: 4æ ¸å¿ƒä»¥ä¸Š (æ¨è8æ ¸å¿ƒ)
- **å†…å­˜**: 8GBä»¥ä¸Š (æ¨è16GB)
- **å­˜å‚¨**: 50GBå¯ç”¨ç©ºé—´ (SSDæ¨è)
- **ç½‘ç»œ**: ç¨³å®šçš„äº’è”ç½‘è¿æ¥

### è½¯ä»¶è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: macOS 10.15+, Ubuntu 18.04+, Windows 10+
- **Python**: 3.11.0+ (é¡¹ç›®æ ‡å‡†)
- **Node.js**: 16.0+ (å‰ç«¯å¼€å‘)
- **Git**: 2.0+
- **Docker**: 20.0+ (å¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)

## ğŸ Pythonåç«¯ç¯å¢ƒæ­å»º

### 1. å…‹éš†é¡¹ç›®
```bash
# å…‹éš†MarketPrismé¡¹ç›®
git clone https://github.com/your-org/marketprism.git
cd marketprism

# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version
# è¾“å‡ºåº”ä¸º: Python 3.11.x
```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# macOS/Linux:
source venv/bin/activate
# Windows:
venv\Scripts\activate

# ç¡®è®¤è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»
which python
```

### 3. å®‰è£…Pythonä¾èµ–
```bash
# å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r requirements.txt

# éªŒè¯å…³é”®ä¾èµ–å®‰è£…
pip list | grep -E "(fastapi|uvicorn|aiohttp|pydantic)"
```

### 4. ç¯å¢ƒé…ç½®
```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®æ¨¡æ¿
cp config/app_config.example.yaml config/app_config.yaml
cp config/services.example.yaml config/services.yaml

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼ˆæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ï¼‰
nano config/app_config.yaml
```

## ğŸ—„ï¸ æ•°æ®åº“ç¯å¢ƒ

### 1. ClickHouseå®‰è£…ï¼ˆå¯é€‰ï¼Œç”¨äºå®Œæ•´åŠŸèƒ½æµ‹è¯•ï¼‰
```bash
# macOS (ä½¿ç”¨Homebrew)
brew install clickhouse

# Ubuntu
sudo apt-get install -y apt-transport-https ca-certificates dirmngr
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 8919F6BD2B48D754
echo "deb https://packages.clickhouse.com/deb stable main" | sudo tee /etc/apt/sources.list.d/clickhouse.list
sudo apt-get update
sudo apt-get install -y clickhouse-server clickhouse-client

# å¯åŠ¨ClickHouse
sudo systemctl start clickhouse-server
```

### 2. Rediså®‰è£…ï¼ˆå¯é€‰ï¼Œç”¨äºç¼“å­˜ï¼‰
```bash
# macOS
brew install redis
brew services start redis

# Ubuntu
sudo apt update
sudo apt install redis-server
sudo systemctl start redis-server

# éªŒè¯Redisè¿æ¥
redis-cli ping
# è¾“å‡º: PONG
```

### 3. NATSå®‰è£…ï¼ˆå¯é€‰ï¼Œç”¨äºæ¶ˆæ¯é˜Ÿåˆ—ï¼‰
```bash
# ä¸‹è½½NATS Server
wget https://github.com/nats-io/nats-server/releases/download/v2.9.21/nats-server-v2.9.21-linux-amd64.zip
unzip nats-server-v2.9.21-linux-amd64.zip
sudo mv nats-server-v2.9.21-linux-amd64/nats-server /usr/local/bin/

# å¯åŠ¨NATS Server
nats-server --jetstream
```

## ğŸš€ æœåŠ¡å¯åŠ¨

### 1. å¿«é€Ÿå¯åŠ¨è„šæœ¬
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x scripts/start-*.sh

# å¯åŠ¨æ ¸å¿ƒæœåŠ¡
./scripts/start-monitoring-dashboard.sh    # ç«¯å£8086
./scripts/start-api-gateway.sh            # ç«¯å£8080
./scripts/start-data-collector.sh         # ç«¯å£8081
```

### 2. æ‰‹åŠ¨å¯åŠ¨æœåŠ¡
```bash
# å¯åŠ¨ç›‘æ§ä»ªè¡¨æ¿ (å‰ç«¯å¼€å‘ä¸»è¦å¯¹æ¥)
cd services/monitoring-dashboard
python main.py

# å¯åŠ¨APIç½‘å…³
cd services/api-gateway-service
python main.py

# å¯åŠ¨æ•°æ®æ”¶é›†å™¨
cd services/data-collector
python main.py
```

### 3. éªŒè¯æœåŠ¡çŠ¶æ€
```bash
# æ£€æŸ¥æœåŠ¡å¥åº·çŠ¶æ€
curl http://localhost:8086/health
curl http://localhost:8080/health
curl http://localhost:8081/health

# è®¿é—®ç°ä»£åŒ–UIç•Œé¢
open http://localhost:8086/modern
```

## ğŸŒ ç½‘ç»œä»£ç†é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰

### 1. è®¾ç½®ä»£ç†ç¯å¢ƒå˜é‡
```bash
# å¦‚æœéœ€è¦ä»£ç†è®¿é—®å¤–éƒ¨API
export http_proxy=http://127.0.0.1:1087
export https_proxy=http://127.0.0.1:1087
export ALL_PROXY=socks5://127.0.0.1:1080

# æ·»åŠ åˆ°shellé…ç½®æ–‡ä»¶
echo 'export http_proxy=http://127.0.0.1:1087' >> ~/.bashrc
echo 'export https_proxy=http://127.0.0.1:1087' >> ~/.bashrc
```

### 2. ä»£ç†é…ç½®æ–‡ä»¶
```yaml
# config/proxy.yaml
proxy:
  development:
    data-collector:
      enabled: true
      http_proxy: "http://127.0.0.1:1087"
      https_proxy: "http://127.0.0.1:1087"
    api-gateway:
      enabled: false
```

## ğŸ“¦ å‰ç«¯å¼€å‘ç¯å¢ƒ

### 1. Node.jsç¯å¢ƒ
```bash
# å®‰è£…Node.js (ä½¿ç”¨nvmæ¨è)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 18
nvm use 18

# éªŒè¯å®‰è£…
node --version  # v18.x.x
npm --version   # 9.x.x
```

### 2. åˆ›å»ºå‰ç«¯é¡¹ç›®
```bash
# åˆ›å»ºReacté¡¹ç›® (æ¨è)
npx create-react-app marketprism-frontend --template typescript
cd marketprism-frontend

# æˆ–åˆ›å»ºVueé¡¹ç›®
npm create vue@latest marketprism-frontend
cd marketprism-frontend

# æˆ–åˆ›å»ºNext.jsé¡¹ç›®
npx create-next-app@latest marketprism-frontend --typescript --tailwind --eslint
cd marketprism-frontend
```

### 3. å®‰è£…æ¨èä¾èµ–
```bash
# Reacté¡¹ç›®ä¾èµ–
npm install axios @tanstack/react-query
npm install @radix-ui/react-* tailwindcss
npm install recharts framer-motion
npm install @types/node @types/react @types/react-dom

# Vueé¡¹ç›®ä¾èµ–
npm install axios @tanstack/vue-query
npm install @headlessui/vue @heroicons/vue
npm install chart.js vue-chartjs

# å¼€å‘å·¥å…·
npm install -D @typescript-eslint/eslint-plugin
npm install -D prettier eslint-config-prettier
npm install -D @testing-library/react @testing-library/jest-dom
```

## ğŸ”— APIæ¥å£é…ç½®

### 1. ç¯å¢ƒå˜é‡é…ç½®
```bash
# åˆ›å»º.envæ–‡ä»¶
cat > .env << EOF
REACT_APP_API_BASE_URL=http://localhost:8080
REACT_APP_WS_URL=ws://localhost:8086/ws
REACT_APP_MONITORING_URL=http://localhost:8086
REACT_APP_ENVIRONMENT=development
EOF
```

### 2. APIå®¢æˆ·ç«¯é…ç½®
```typescript
// src/api/client.ts
import axios from 'axios';

const apiClient = axios.create({
  baseURL: process.env.REACT_APP_API_BASE_URL || 'http://localhost:8080',
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
  },
});

// è¯·æ±‚æ‹¦æˆªå™¨
apiClient.interceptors.request.use((config) => {
  const token = localStorage.getItem('authToken');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// å“åº”æ‹¦æˆªå™¨
apiClient.interceptors.response.use(
  (response) => response.data,
  (error) => {
    console.error('API Error:', error);
    return Promise.reject(error);
  }
);

export default apiClient;
```

### 3. WebSocketè¿æ¥é…ç½®
```typescript
// src/hooks/useWebSocket.ts
import { useEffect, useState, useRef } from 'react';

interface UseWebSocketProps {
  url: string;
  onMessage?: (data: any) => void;
  onError?: (error: Event) => void;
}

export function useWebSocket({ url, onMessage, onError }: UseWebSocketProps) {
  const [isConnected, setIsConnected] = useState(false);
  const wsRef = useRef<WebSocket | null>(null);

  useEffect(() => {
    const ws = new WebSocket(url);
    wsRef.current = ws;

    ws.onopen = () => setIsConnected(true);
    ws.onclose = () => setIsConnected(false);
    ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      onMessage?.(data);
    };
    ws.onerror = (error) => onError?.(error);

    return () => ws.close();
  }, [url, onMessage, onError]);

  const sendMessage = (message: any) => {
    if (wsRef.current?.readyState === WebSocket.OPEN) {
      wsRef.current.send(JSON.stringify(message));
    }
  };

  return { isConnected, sendMessage };
}
```

## ğŸ§ª å¼€å‘å·¥å…·é…ç½®

### 1. VS Codeé…ç½®
```json
// .vscode/settings.json
{
  "python.defaultInterpreterPath": "./venv/bin/python",
  "typescript.preferences.importModuleSpecifier": "relative",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "files.associations": {
    "*.yaml": "yaml"
  }
}
```

### 2. Gité…ç½®
```bash
# é…ç½®Git hooks
cat > .githooks/pre-commit << EOF
#!/bin/sh
# è¿è¡Œå‰ç«¯ä»£ç æ£€æŸ¥
cd frontend && npm run lint
cd ../backend && python -m pytest tests/
EOF

chmod +x .githooks/pre-commit
git config core.hooksPath .githooks
```

### 3. è°ƒè¯•é…ç½®
```json
// .vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Python: FastAPI",
      "type": "python",
      "request": "launch",
      "program": "${workspaceFolder}/services/monitoring-dashboard/main.py",
      "console": "integratedTerminal",
      "env": {
        "PYTHONPATH": "${workspaceFolder}"
      }
    },
    {
      "name": "Debug React App",
      "type": "node",
      "request": "launch",
      "cwd": "${workspaceFolder}/frontend",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["start"]
    }
  ]
}
```

## ğŸ“Š å¼€å‘ç¯å¢ƒéªŒè¯

### 1. åç«¯æœåŠ¡éªŒè¯
```bash
# æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
curl -s http://localhost:8086/health | jq
curl -s http://localhost:8080/health | jq
curl -s http://localhost:8081/health | jq

# æµ‹è¯•APIæ¥å£
curl -s http://localhost:8086/api/v1/monitoring/overview | jq
curl -s http://localhost:8086/api/v1/monitoring/services | jq
```

### 2. WebSocketè¿æ¥éªŒè¯
```javascript
// æµè§ˆå™¨æ§åˆ¶å°æµ‹è¯•
const ws = new WebSocket('ws://localhost:8086/ws');
ws.onopen = () => console.log('Connected');
ws.onmessage = (event) => console.log('Message:', JSON.parse(event.data));
ws.send(JSON.stringify({
  type: 'subscribe',
  channel: 'system'
}));
```

### 3. å‰ç«¯ç¯å¢ƒéªŒè¯
```bash
# å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd frontend
npm start

# éªŒè¯æ„å»º
npm run build

# è¿è¡Œæµ‹è¯•
npm test
```

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### 1. Pythonç‰ˆæœ¬é—®é¢˜
```bash
# å¦‚æœPythonç‰ˆæœ¬ä¸å¯¹
pyenv install 3.11.0
pyenv local 3.11.0

# æˆ–ä½¿ç”¨conda
conda create -n marketprism python=3.11
conda activate marketprism
```

### 2. ç«¯å£å†²çª
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :8086
lsof -i :8080

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>

# æˆ–ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£
```

### 3. ä¾èµ–å®‰è£…å¤±è´¥
```bash
# æ¸…ç†pipç¼“å­˜
pip cache purge

# ä½¿ç”¨å›½å†…é•œåƒæº
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/

# Node.jsä¾èµ–é—®é¢˜
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### 4. ç½‘ç»œè¿æ¥é—®é¢˜
```bash
# æµ‹è¯•ç½‘ç»œè¿æ¥
ping api.binance.com
ping api.okx.com

# é…ç½®ä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
export http_proxy=http://your-proxy:port
export https_proxy=http://your-proxy:port
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼
- **æŠ€æœ¯è´Ÿè´£äºº**: [å§“å] - [é‚®ç®±]
- **åç«¯æ”¯æŒ**: [å§“å] - [é‚®ç®±]
- **ç¯å¢ƒæ”¯æŒ**: [å§“å] - [é‚®ç®±]

### å¸¸ç”¨å‘½ä»¤å¿«é€Ÿå‚è€ƒ
```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒ
source venv/bin/activate
./scripts/start-monitoring-dashboard.sh

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
curl http://localhost:8086/health

# æŸ¥çœ‹æ—¥å¿—
tail -f services/monitoring-dashboard/logs/app.log

# é‡å¯æœåŠ¡
pkill -f "python.*main.py"
./scripts/start-monitoring-dashboard.sh
```

é€šè¿‡ä»¥ä¸Šé…ç½®ï¼Œå‰ç«¯å›¢é˜Ÿåº”è¯¥èƒ½å¤ŸæˆåŠŸæ­å»ºå®Œæ•´çš„MarketPrismå¼€å‘ç¯å¢ƒï¼Œå¼€å§‹å‰ç«¯å¼€å‘å·¥ä½œã€‚