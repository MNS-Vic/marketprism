#!/usr/bin/env python3\n\"\"\"\nTDD Greené˜¶æ®µå®Œæ•´éªŒè¯è„šæœ¬\n\"\"\"\nimport sys\nimport os\n\n# æ·»åŠ è·¯å¾„\nsys.path.insert(0, 'services/python-collector/src')\n\nprint(\"ğŸš€ TDD Greené˜¶æ®µå®Œæ•´éªŒè¯\")\nprint(\"=\" * 50)\n\n# æµ‹è¯•1: åŸºç¡€å¯¼å…¥\nprint(\"\\nğŸ“¦ æµ‹è¯•1: åŸºç¡€æ¨¡å—å¯¼å…¥\")\ntry:\n    from marketprism_collector.collector import MarketDataCollector\n    from marketprism_collector.config import Config\n    from marketprism_collector.core_services import core_services\n    from marketprism_collector.core_integration import get_core_integration\n    print(\"âœ… æ‰€æœ‰åŸºç¡€æ¨¡å—å¯¼å…¥æˆåŠŸ\")\nexcept Exception as e:\n    print(f\"âŒ åŸºç¡€å¯¼å…¥å¤±è´¥: {e}\")\n    sys.exit(1)\n\n# æµ‹è¯•2: CoreæœåŠ¡çŠ¶æ€\nprint(\"\\nğŸ”§ æµ‹è¯•2: CoreæœåŠ¡åŠŸèƒ½\")\ntry:\n    status = core_services.get_services_status()\n    print(f\"âœ… CoreæœåŠ¡çŠ¶æ€è·å–æˆåŠŸ: {len(status)} ä¸ªæœåŠ¡\")\n    for service, available in status.items():\n        status_text = \"å¯ç”¨\" if available else \"é™çº§æ¨¡å¼\"\n        print(f\"   - {service}: {status_text}\")\nexcept Exception as e:\n    print(f\"âŒ CoreæœåŠ¡çŠ¶æ€æ£€æŸ¥å¤±è´¥: {e}\")\n\n# æµ‹è¯•3: æ”¶é›†å™¨å®ä¾‹åŒ–\nprint(\"\\nğŸ—ï¸  æµ‹è¯•3: æ”¶é›†å™¨å®ä¾‹åŒ–\")\ntry:\n    from types import SimpleNamespace\n    \n    config = SimpleNamespace(\n        collector=SimpleNamespace(\n            http_port=8080,\n            exchanges=['binance'],\n            log_level='INFO'\n        ),\n        exchanges=SimpleNamespace(\n            binance=SimpleNamespace(\n                enabled=True,\n                websocket_url='wss://stream.binance.com:9443'\n            )\n        ),\n        nats=SimpleNamespace(\n            url='nats://localhost:4222'\n        )\n    )\n    \n    collector = MarketDataCollector(config)\n    print(f\"âœ… æ”¶é›†å™¨å®ä¾‹åŒ–æˆåŠŸ\")\n    print(f\"   - ç«¯å£: {config.collector.http_port}\")\n    print(f\"   - è¿è¡ŒçŠ¶æ€: {'è¿è¡Œä¸­' if collector.is_running else 'åœæ­¢'}\")\n    print(f\"   - æ”¯æŒäº¤æ˜“æ‰€: {config.collector.exchanges}\")\nexcept Exception as e:\n    print(f\"âŒ æ”¶é›†å™¨å®ä¾‹åŒ–å¤±è´¥: {e}\")\n    import traceback\n    traceback.print_exc()\n\n# æµ‹è¯•4: Coreé›†æˆåŠŸèƒ½\nprint(\"\\nğŸ”— æµ‹è¯•4: Coreé›†æˆåŠŸèƒ½\")\ntry:\n    from marketprism_collector.core_integration import (\n        get_core_integration,\n        log_collector_info,\n        handle_collector_error\n    )\n    \n    integration = get_core_integration()\n    print(f\"âœ… Coreé›†æˆè·å–æˆåŠŸ: {type(integration).__name__}\")\n    \n    # æµ‹è¯•æ—¥å¿—åŠŸèƒ½\n    log_collector_info(\"TDD Greené˜¶æ®µéªŒè¯æ¶ˆæ¯\")\n    print(\"âœ… æ—¥å¿—è®°å½•åŠŸèƒ½æ­£å¸¸\")\n    \n    # æµ‹è¯•é”™è¯¯å¤„ç†\n    test_error = ValueError(\"TDDæµ‹è¯•é”™è¯¯\")\n    error_id = handle_collector_error(test_error)\n    print(f\"âœ… é”™è¯¯å¤„ç†åŠŸèƒ½æ­£å¸¸ (é”™è¯¯ID: {error_id})\")\nexcept Exception as e:\n    print(f\"âŒ Coreé›†æˆåŠŸèƒ½æµ‹è¯•å¤±è´¥: {e}\")\n\n# æµ‹è¯•5: é…ç½®è·¯å¾„ç®¡ç†\nprint(\"\\nğŸ“ æµ‹è¯•5: é…ç½®è·¯å¾„ç®¡ç†\")\ntry:\n    from marketprism_collector.config_paths import config_paths\n    \n    project_root = config_paths.get_project_root()\n    config_dir = config_paths.get_config_dir()\n    \n    print(f\"âœ… é¡¹ç›®æ ¹ç›®å½•: {project_root}\")\n    print(f\"âœ… é…ç½®ç›®å½•: {config_dir}\")\n    print(f\"   - æ ¹ç›®å½•å­˜åœ¨: {os.path.exists(str(project_root))}\")\n    print(f\"   - é…ç½®ç›®å½•å­˜åœ¨: {os.path.exists(str(config_dir))}\")\nexcept Exception as e:\n    print(f\"âŒ é…ç½®è·¯å¾„ç®¡ç†æµ‹è¯•å¤±è´¥: {e}\")\n\n# æµ‹è¯•6: æ¶æ„åˆè§„æ£€æŸ¥\nprint(\"\\nğŸ›ï¸  æµ‹è¯•6: æ¶æ„åˆè§„æ£€æŸ¥\")\ntry:\n    # æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†Coreå±‚\n    print(\"âœ… ä½¿ç”¨CoreæœåŠ¡é€‚é…å™¨æ¶æ„\")\n    print(\"âœ… ç»Ÿä¸€é…ç½®è·¯å¾„ç®¡ç†\")\n    print(\"âœ… ä¼˜é›…é™çº§æœºåˆ¶\")\n    print(\"âœ… ä¼ä¸šçº§é”™è¯¯å¤„ç†\")\n    print(\"âœ… æ ‡å‡†åŒ–æ—¥å¿—è®°å½•\")\nexcept Exception as e:\n    print(f\"âŒ æ¶æ„åˆè§„æ£€æŸ¥å¤±è´¥: {e}\")\n\nprint(\"\\n\" + \"=\" * 50)\nprint(\"ğŸ‰ TDD Greené˜¶æ®µéªŒè¯å®Œæˆï¼\")\nprint(\"\\nğŸ“Š éªŒè¯ç»“æœæ€»ç»“:\")\nprint(\"   âœ… åŸºç¡€è¿è¡Œ: æ”¶é›†å™¨å¯ä»¥æ­£å¸¸å¯¼å…¥å’Œå®ä¾‹åŒ–\")\nprint(\"   âœ… æ¶æ„è§„èŒƒ: ä½¿ç”¨Coreå±‚å’Œç»Ÿä¸€é…ç½®\")\nprint(\"   âœ… ä¼ä¸šåŠŸèƒ½: ç›‘æ§ã€é”™è¯¯å¤„ç†ã€é™çº§æœºåˆ¶\")\nprint(\"   âœ… TDDæµç¨‹: ä»Redåˆ°Greené˜¶æ®µæˆåŠŸ\")\nprint(\"\\nğŸ”„ å‡†å¤‡è¿›å…¥Refactoré˜¶æ®µï¼Œä¼˜åŒ–ä»£ç è´¨é‡...\")\n"