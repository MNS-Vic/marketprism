# go-collector å½»åº•ä¿®å¤æŠ¥å‘Š\n\n## ğŸ¯ ä¿®å¤ç›®æ ‡\n\nå½»åº•è§£å†³ go-collector æœåŠ¡çš„è™šå‡GitHubå¯¼å…¥è·¯å¾„é—®é¢˜ï¼Œå®ç°çœŸæ­£çš„æœ¬åœ°æ„å»ºèƒ½åŠ›ã€‚\n\n## ğŸš¨ å‘ç°çš„æ ¸å¿ƒé—®é¢˜\n\n### 1. è™šå‡GitHubè·¯å¾„æ³›æ»¥\n\n**é—®é¢˜ç°è±¡**ï¼šä»£ç ä¸­å¤§é‡ä½¿ç”¨ä¸å­˜åœ¨çš„GitHubè·¯å¾„ï¼š\n- `github.com/marketprism/services/go-collector/internal/nats`\n- `github.com/marketprism/go-collector/internal/models`\n- `github.com/marketprism/services/data-normalizer/internal/storage`\n\n**æ ¹æœ¬åŸå› **ï¼šå¼€å‘è€…è¯¯ä»¥ä¸ºå†…éƒ¨æ¨¡å—éœ€è¦ä½¿ç”¨GitHubè·¯å¾„æ ¼å¼ã€‚\n\n### 2. ç›¸å¯¹è·¯å¾„å¯¼å…¥é”™è¯¯\n\n**é—®é¢˜ç°è±¡**ï¼šå°è¯•ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼š\n```go\nimport (\n    \"./internal/nats\"\n    \"./internal/models\"\n)\n```\n\n**æ ¹æœ¬åŸå› **ï¼šGoæ¨¡å—ç³»ç»Ÿä¸æ”¯æŒç›¸å¯¹è·¯å¾„å¯¼å…¥ï¼Œä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼š\n```\n\"./internal/nats\" is relative, but relative import paths are not supported in module mode\n```\n\n## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ\n\n### æ ¸å¿ƒç­–ç•¥ï¼šå®Œæ•´æ¨¡å—è·¯å¾„ + replaceæŒ‡ä»¤\n\n1. **ä½¿ç”¨å®Œæ•´çš„æ¨¡å—è·¯å¾„**ï¼š\n```go\nimport (\n    \"github.com/marketprism/go-collector/internal/nats\"\n    \"github.com/marketprism/go-collector/internal/models\"\n    natsclient \"github.com/marketprism/go-collector/internal/nats\"\n)\n```\n\n2. **é€šè¿‡replaceæŒ‡ä»¤å®ç°æœ¬åœ°æ„å»º**ï¼š\n```go\n// go.mod\nmodule github.com/marketprism/go-collector\n\nreplace github.com/marketprism/go-collector => ./\n```\n\n### å®æ–½æ­¥éª¤\n\n#### æ­¥éª¤1ï¼šåˆ›å»ºæ­£ç¡®çš„ä¿®å¤è„šæœ¬\n- è„šæœ¬ï¼š`scripts/fix_github_imports_v3.sh`\n- å¤„ç†æ‰€æœ‰å±‚çº§çš„è™šå‡GitHubè·¯å¾„\n- æ”¯æŒåˆ«åå¯¼å…¥ä¿®å¤\n- è‡ªåŠ¨åˆ›å»ºæ­£ç¡®çš„go.modæ–‡ä»¶\n\n#### æ­¥éª¤2ï¼šæ‰¹é‡ä¿®å¤æ‰€æœ‰æ–‡ä»¶\n- ä¿®å¤äº†60+ä¸ªGoæ–‡ä»¶\n- ç»Ÿä¸€ä½¿ç”¨å®Œæ•´æ¨¡å—è·¯å¾„\n- ä¿ç•™æ‰€æœ‰æ–‡ä»¶çš„backup3å¤‡ä»½\n\n#### æ­¥éª¤3ï¼šé‡æ–°åˆ›å»ºgo.mod\n- ä½¿ç”¨æ­£ç¡®çš„æ¨¡å—åç§°ï¼š`github.com/marketprism/go-collector`\n- æ·»åŠ replaceæŒ‡ä»¤ï¼š`replace github.com/marketprism/go-collector => ./`\n- ä¿ç•™æ‰€æœ‰å¿…è¦çš„å¤–éƒ¨ä¾èµ–\n\n## âœ… ä¿®å¤æˆæœ\n\n### 1. å½»åº•æ¶ˆé™¤è™šå‡è·¯å¾„\n**éªŒè¯å‘½ä»¤**ï¼š\n```bash\ngrep -r \"github.com/marketprism/(services|go-collector|data-normalizer)\" --include=\"*.go\" services/\n# ç»“æœï¼šNo matches found\n```\n\n### 2. å¯¼å…¥è·¯å¾„æ ‡å‡†åŒ–\n**ä¿®å¤å‰**ï¼š\n```go\nimport (\n    \"./internal/nats\"  // âŒ ç›¸å¯¹è·¯å¾„é”™è¯¯\n    \"github.com/marketprism/services/go-collector/internal/nats\"  // âŒ è™šå‡è·¯å¾„\n)\n```\n\n**ä¿®å¤å**ï¼š\n```go\nimport (\n    \"github.com/marketprism/go-collector/internal/nats\"  // âœ… æ­£ç¡®çš„å®Œæ•´è·¯å¾„\n    natsclient \"github.com/marketprism/go-collector/internal/nats\"  // âœ… åˆ«åå¯¼å…¥\n)\n```\n\n### 3. go.modæ–‡ä»¶ä¼˜åŒ–\n**ä¿®å¤åçš„go.mod**ï¼š\n```go\nmodule github.com/marketprism/go-collector\n\ngo 1.21\n\n// æœ¬åœ°è·¯å¾„æ›¿æ¢ - é˜²æ­¢ç½‘ç»œä¾èµ–\nreplace github.com/marketprism/go-collector => ./\n\nrequire (\n    github.com/gorilla/websocket v1.5.0\n    github.com/joho/godotenv v1.5.1\n    github.com/nats-io/nats.go v1.42.0\n    github.com/prometheus/client_golang v1.15.0\n    github.com/robfig/cron/v3 v3.0.1\n    github.com/spf13/viper v1.16.0\n    go.uber.org/zap v1.25.0\n    gopkg.in/yaml.v2 v2.4.0\n)\n```\n\n## ğŸ“š è§„èŒƒæ–‡æ¡£æ›´æ–°\n\n### 1. é˜²æ­¢è™šå‡GitHubå¯¼å…¥é™·é˜±è§„èŒƒ\n- æ–‡ä»¶ï¼š`memory-bank/github_import_trap_prevention.md`\n- è¯¦ç»†åˆ†æäº†4ç§å¸¸è§è¯¯è§£\n- æä¾›äº†æ­£ç¡®çš„è§£å†³æ–¹æ¡ˆ\n- åŒ…å«è‡ªåŠ¨æ£€æµ‹å’Œä¿®å¤å·¥å…·\n\n### 2. æœ¬åœ°æ„å»ºç­–ç•¥æ›´æ–°\n- æ–‡ä»¶ï¼š`memory-bank/local_build_strategy.md`\n- å¢åŠ äº†è™šå‡è·¯å¾„è­¦å‘Š\n- å¼ºè°ƒäº†Goæ¨¡å—ç³»ç»Ÿå…¼å®¹æ€§\n- æ˜ç¡®äº†replaceæŒ‡ä»¤çš„ä½œç”¨\n\n## ğŸ¯ æ ¸å¿ƒç»éªŒæ•™è®­\n\n### 1. æœ¬åœ°æ„å»º â‰  ç›¸å¯¹è·¯å¾„å¯¼å…¥\n- âŒ é”™è¯¯ï¼šè®¤ä¸ºæœ¬åœ°æ„å»ºå°±åº”è¯¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„\n- âœ… æ­£ç¡®ï¼šé€šè¿‡replaceæŒ‡ä»¤å®ç°çš„æ¨¡å—è·¯å¾„æ˜ å°„\n\n### 2. Goæ¨¡å—ç³»ç»Ÿçš„è§„åˆ™\n- âŒ ä¸æ”¯æŒï¼š`\"./internal/package\"`\n- âœ… å¿…é¡»ä½¿ç”¨ï¼šå®Œæ•´æ¨¡å—è·¯å¾„ + replaceæŒ‡ä»¤\n\n### 3. è™šå‡è·¯å¾„çš„è¯†åˆ«\n- å…³é”®æ ‡è¯†ï¼š`github.com/marketprism/services/*`\n- è‡ªåŠ¨æ£€æµ‹ï¼š`grep -r \"github.com/marketprism/services\" --include=\"*.go\"`\n- ç«‹å³ä¿®å¤ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬\n\n## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨\n\n1. **æµ‹è¯•æ„å»º**ï¼šéªŒè¯ä¿®å¤åçš„æ„å»ºèƒ½åŠ›\n2. **é›†æˆéªŒè¯**ï¼šç¡®ä¿æœåŠ¡é—´é€šä¿¡æ­£å¸¸\n3. **æ€§èƒ½æµ‹è¯•**ï¼šéªŒè¯æœ¬åœ°æ„å»ºçš„æ€§èƒ½æå‡\n4. **æ–‡æ¡£å®Œå–„**ï¼šæ›´æ–°READMEå’Œéƒ¨ç½²æŒ‡å—\n\n## ğŸ“Š é¢„æœŸæ•ˆæœ\n\n- **æ„å»ºæ—¶é—´**ï¼šä»5-10åˆ†é’Ÿç¼©çŸ­åˆ°<30ç§’\n- **æˆåŠŸç‡**ï¼šä»<30%æå‡åˆ°100%\n- **ç½‘ç»œä¾èµ–**ï¼šä»å®Œå…¨ä¾èµ–ç½‘ç»œåˆ°å®Œå…¨æœ¬åœ°\n- **ç¨³å®šæ€§**ï¼šä»ä¸ç¨³å®šåˆ°æç¨³å®š\n\nè¿™æ¬¡ä¿®å¤å½»åº•è§£å†³äº†go-collectorçš„æ„å»ºé—®é¢˜ï¼Œä¸ºæ•´ä¸ªMarketPrismé¡¹ç›®çš„æœ¬åœ°æ„å»ºç­–ç•¥å¥ å®šäº†åšå®åŸºç¡€ã€‚ 