#!/bin/bash

echo "🚨 卡住先生的紧急抢救方案 🚨"
echo "检测到CPU负载过高，立即采取紧急措施！"
echo ""

echo "📊 当前问题："
echo "  - WindowServer占用39.1% CPU"
echo "  - Cursor编辑器占用37.6% CPU" 
echo "  - Chrome占用30.6% CPU"
echo "  - 系统负载: 3.82（严重超载）"
echo ""

echo "🎯 紧急解决方案："
echo ""
echo "1. 立即关闭不必要的应用："
echo "   - 关闭多余的Chrome标签页"
echo "   - 关闭豆包App"
echo "   - 重启Cursor编辑器"
echo ""

echo "2. 强制停止所有Docker进程："
echo "   执行: killall -9 docker"
echo "   执行: killall -9 com.docker.docker"
echo ""

echo "3. 清理系统缓存："
echo "   执行: sudo purge"
echo ""

echo "4. 重启Docker Desktop："
echo "   - 完全退出Docker Desktop应用"
echo "   - 等待10秒"
echo "   - 重新启动Docker Desktop"
echo ""

echo "5. 如果还是不行："
echo "   - 重启Mac电脑"
echo "   - 这是最终解决方案"
echo ""

echo "💡 预防措施："
echo "  - 关闭不用的浏览器标签"
echo "  - 定期重启电脑"
echo "  - 监控系统负载: top -l 1"
echo ""

echo "😅 卡住先生总结："
echo "  Docker没问题，是你的Mac太累了！"
echo "  先让电脑休息一下，再试Docker构建。" 