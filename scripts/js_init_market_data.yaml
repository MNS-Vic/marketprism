# JetStream initialization config (dict-form)
# ✅ 单流架构：仅 MARKET_DATA（高频 orderbook/trade 走 Core NATS，不入 JetStream）
streams:
  MARKET_DATA:
    name: "MARKET_DATA"
    subjects:
      # 精确到基础交易所，排除 legacy 旧主题（如 okx_derivatives/futures 等）
      # funding_rate
      - "funding_rate.binance.>"
      - "funding_rate.okx.>"
      - "funding_rate.deribit.>"
      # open_interest
      - "open_interest.binance.>"
      - "open_interest.okx.>"
      - "open_interest.deribit.>"
      # liquidation
      - "liquidation.binance.>"
      - "liquidation.okx.>"
      - "liquidation.deribit.>"
      # volatility_index
      - "volatility_index.binance.>"
      - "volatility_index.okx.>"
      - "volatility_index.deribit.>"
      # lsr
      - "lsr_top_position.binance.>"
      - "lsr_top_position.okx.>"
      - "lsr_top_position.deribit.>"
      - "lsr_all_account.binance.>"
      - "lsr_all_account.okx.>"
      - "lsr_all_account.deribit.>"
    max_consumers: 50
    max_msgs: 5000000
    max_bytes: 2147483648
    max_age: 172800
    num_replicas: 1
    duplicate_window: 300
    storage: "file"
    discard: "old"
