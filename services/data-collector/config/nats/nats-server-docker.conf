# NATS Server Configuration for MarketPrism - Docker Version
# 专为Docker容器部署优化的配置文件

# =============================================================================
# 基础连接配置
# =============================================================================
host: 0.0.0.0
port: 4222

# =============================================================================
# 日志配置 - Docker优化
# =============================================================================
# Docker环境使用stdout，便于日志收集
# log_file: 注释掉以使用stdout
logtime: true
debug: false
trace: false

# =============================================================================
# 连接和性能限制
# =============================================================================
# 最大连接数
max_connections: 1000

# 最大控制行长度 (4KB)
max_control_line: 4096

# 最大消息负载 (1MB)
max_payload: 1048576

# 最大待处理字节数 (64MB)
max_pending: 67108864

# 写入超时 (2秒)
write_deadline: "2s"

# =============================================================================
# JetStream配置 - Docker卷挂载
# =============================================================================
jetstream {
    # Docker环境使用卷挂载的存储目录
    store_dir: "/data/jetstream"
    
    # 最大内存使用 (256MB)
    max_memory_store: 268435456
    
    # 最大文件存储 (10GB)
    max_file_store: 10737418240
    
    # 同步间隔 (2分钟)
    sync_interval: "2m"
}

# =============================================================================
# 监控配置
# =============================================================================
# HTTP监控端口
http_port: 8222

# 监控路径
http_base_path: "/"

# =============================================================================
# Docker环境特定配置
# =============================================================================
# 允许所有IP访问 (容器网络)
# 在生产环境中应该限制访问

# 禁用PID文件 (容器中不需要)
# pid_file: 注释掉

# 服务器名称 (便于识别)
server_name: "marketprism-nats-docker"
