#!/usr/bin/env python3\n\"\"\"\nTDD Greené˜¶æ®µéªŒè¯\n\"\"\"\nimport sys\nimport os\n\n# æ·»åŠ è·¯å¾„\nsys.path.insert(0, '../services/python-collector/src')\n\nprint(\"ğŸš€ å¼€å§‹TDD Greené˜¶æ®µéªŒè¯\")\nprint(\"=\" * 40)\n\n# æµ‹è¯•1: åŸºç¡€å¯¼å…¥\nprint(\"æµ‹è¯•1: åŸºç¡€å¯¼å…¥...\")\ntry:\n    from marketprism_collector.collector import MarketDataCollector\n    from marketprism_collector.config import Config\n    from marketprism_collector.core_services import core_services\n    print(\"âœ… æ‰€æœ‰åŸºç¡€æ¨¡å—å¯¼å…¥æˆåŠŸ\")\nexcept Exception as e:\n    print(f\"âŒ åŸºç¡€å¯¼å…¥å¤±è´¥: {e}\")\n    sys.exit(1)\n\n# æµ‹è¯•2: CoreæœåŠ¡çŠ¶æ€\nprint(\"\\næµ‹è¯•2: CoreæœåŠ¡çŠ¶æ€...\")\ntry:\n    status = core_services.get_services_status()\n    print(f\"âœ… CoreæœåŠ¡çŠ¶æ€è·å–æˆåŠŸ: {len(status)} ä¸ªæœåŠ¡\")\n    for service, available in status.items():\n        print(f\"   - {service}: {'å¯ç”¨' if available else 'é™çº§æ¨¡å¼'}\")\nexcept Exception as e:\n    print(f\"âŒ CoreæœåŠ¡çŠ¶æ€æ£€æŸ¥å¤±è´¥: {e}\")\n\n# æµ‹è¯•3: æ”¶é›†å™¨å®ä¾‹åŒ–\nprint(\"\\næµ‹è¯•3: æ”¶é›†å™¨å®ä¾‹åŒ–...\")\ntry:\n    from types import SimpleNamespace\n    \n    config = SimpleNamespace(\n        collector=SimpleNamespace(\n            http_port=8080,\n            exchanges=['binance'],\n            log_level='INFO'\n        ),\n        exchanges=SimpleNamespace(\n            binance=SimpleNamespace(\n                enabled=True,\n                websocket_url='wss://stream.binance.com:9443'\n            )\n        ),\n        nats=SimpleNamespace(\n            url='nats://localhost:4222'\n        )\n    )\n    \n    collector = MarketDataCollector(config)\n    print(f\"âœ… æ”¶é›†å™¨å®ä¾‹åŒ–æˆåŠŸï¼ŒçŠ¶æ€: {'è¿è¡Œä¸­' if collector.is_running else 'åœæ­¢'}\")\nexcept Exception as e:\n    print(f\"âŒ æ”¶é›†å™¨å®ä¾‹åŒ–å¤±è´¥: {e}\")\n\n# æµ‹è¯•4: Coreé›†æˆåŠŸèƒ½\nprint(\"\\næµ‹è¯•4: Coreé›†æˆåŠŸèƒ½...\")\ntry:\n    from marketprism_collector.core_integration import (\n        get_core_integration,\n        log_collector_info,\n        handle_collector_error\n    )\n    \n    integration = get_core_integration()\n    print(f\"âœ… Coreé›†æˆè·å–æˆåŠŸ: {type(integration).__name__}\")\n    \n    # æµ‹è¯•æ—¥å¿—åŠŸèƒ½\n    log_collector_info(\"Greené˜¶æ®µæµ‹è¯•æ¶ˆæ¯\")\n    print(\"âœ… æ—¥å¿—åŠŸèƒ½æ­£å¸¸\")\n    \n    # æµ‹è¯•é”™è¯¯å¤„ç†\n    error_id = handle_collector_error(ValueError(\"æµ‹è¯•é”™è¯¯\"))\n    print(f\"âœ… é”™è¯¯å¤„ç†åŠŸèƒ½æ­£å¸¸ï¼Œé”™è¯¯ID: {error_id}\")\nexcept Exception as e:\n    print(f\"âŒ Coreé›†æˆåŠŸèƒ½æµ‹è¯•å¤±è´¥: {e}\")\n\n# æµ‹è¯•5: é…ç½®è·¯å¾„ç®¡ç†\nprint(\"\\næµ‹è¯•5: é…ç½®è·¯å¾„ç®¡ç†...\")\ntry:\n    from marketprism_collector.config_paths import config_paths\n    \n    project_root = config_paths.get_project_root()\n    config_dir = config_paths.get_config_dir()\n    \n    print(f\"âœ… é¡¹ç›®æ ¹ç›®å½•: {project_root}\")\n    print(f\"âœ… é…ç½®ç›®å½•: {config_dir}\")\nexcept Exception as e:\n    print(f\"âŒ é…ç½®è·¯å¾„ç®¡ç†æµ‹è¯•å¤±è´¥: {e}\")\n\nprint(\"\\n\" + \"=\" * 40)\nprint(\"ğŸ‰ TDD Greené˜¶æ®µéªŒè¯å®Œæˆï¼\")\nprint(\"âœ¨ æ‰€æœ‰åŸºç¡€åŠŸèƒ½æ­£å¸¸å·¥ä½œï¼Œä¿®å¤æˆåŠŸï¼\")\nprint(\"ğŸ”„ å‡†å¤‡è¿›å…¥Refactoré˜¶æ®µ...\")\n"